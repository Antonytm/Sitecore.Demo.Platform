<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/"
               xmlns:unicorn="http://www.sitecore.net/xmlconfig/unicorn/"
               xmlns:sxa="http://www.sitecore.net/xmlconfig/sxa/">
  <sitecore unicorn:require="On">
    <unicorn>
      <configurations>
        <configuration name="Project.Global.Website" description="Shared Site Content" dependencies="Foundation.*,Feature.*" extends="Helix.Base">
          <predicate type="Unicorn.Predicates.SerializationPresetPredicate, Unicorn" singleInstance="true">
            <!-- Global Project -->
            <include name="Templates" database="master" path="/sitecore/templates/Project/Habitat SXA Sites/Global" sxa:require="On" />
            <include name="Templates.Branches" database="master" path="/sitecore/templates/Branches/Project/Habitat SXA Sites/Global" sxa:require="On" />
            <include name="Layout.Renderings" database="master" path="/sitecore/layout/Renderings/Project/Habitat SXA Sites/Global" sxa:require="On" />
            <include name="System.Settings" database="master" path="/sitecore/system/Settings/Project/Habitat SXA Sites/Global" sxa:require="On"/>
            <include name="Media" database="master" path="/sitecore/media library/Project/Habitat SXA Sites/Global" sxa:require="On" />
            <include name="Forms" database="master" path="/sitecore/Forms/Habitat SXA Sites/Global" />

            <!-- Content -->
            <include name="Content" database="master" path="/sitecore/content/Habitat SXA Sites" sxa:require="On">
              <exclude children="true">
                <except name="Global" includeChildren="true" />
              </exclude>
            </include>

            <!-- todo move workflow and languages to foundation level ?? -->
            <include name="System.Workflows" database="master" path="/sitecore/system/Workflows/Demo Workflow" />
            <include name="Languages" database="master" path="/sitecore/system/Languages" />
            <!--<include name="Settings" database="master" path="/sitecore/system/Settings/Feature/Habitat Home"  sxa:require="On"/> this one is already controlled by foundation-->

            <!-- todo These templates and renderings are currently in a feature, while this is a project configuration  -->
            <include name="Feature.Articles.Templates" database="master" path="/sitecore/templates/Feature/Habitat Home/Articles"  sxa:require="On"/>
            <include name="Feature.Navigation.Templates" database="master" path="/sitecore/templates/Feature/Habitat Home/Navigation"  sxa:require="On"/>
            <include name="Feature.PageContent.Templates" database="master" path="/sitecore/templates/Feature/Habitat Home/Page Content"  sxa:require="On"/>

            <!-- todo Decide what to do with these overrides -> Move to foundation ? -->
            <!-- SXA Overrides -->
            <include name="SXA.CoreSripts.Typeahead" database="master" path="/sitecore/media library/Base Themes/Core Libraries/scripts/typeahead"  sxa:require="On"/>

            <!-- Validation rules -->
            <include name="ValidationRules.RichText" database="master" path="/sitecore/system/Settings/Validation Rules/Field Types/Rich Text" />
            <include name="ValidationRules.Global" database="master" path="/sitecore/system/Settings/Validation Rules/Global Rules" />

            <!-- Experience Editor buttons -->
            <include name="WebEdit.Hero.EditHeroBackground" database="core" path="/sitecore/content/Applications/WebEdit/Custom Experience Buttons/Edit Hero Background" />
            <include name="WebEdit.Author.AssociateAuthor" database="core" path="/sitecore/content/Applications/WebEdit/Custom Experience Buttons/Associate Author" />

            <!-- Stackla -->
            <include name="Stackla.Renderings" database="master" path="/sitecore/layout/Renderings/Stackla" />

            

          </predicate>
          <userDataStore type="Unicorn.Users.Data.FilesystemUserDataStore, Unicorn.Users" physicalRootPath="$(sourceFolder)\project\Global\serialization\Users" singleInstance="true" />
          <userPredicate type="Unicorn.Users.UserPredicates.ConfigurationUserPredicate, Unicorn.Users" singleInstance="true">
            <include domain="sitecore" pattern="demoadmin" />
          </userPredicate>
          <userSyncConfiguration defaultPassword="b" minPasswordLength="1" removeOrphans="false"/>
        </configuration>
      </configurations>
    </unicorn>
  </sitecore>
</configuration>