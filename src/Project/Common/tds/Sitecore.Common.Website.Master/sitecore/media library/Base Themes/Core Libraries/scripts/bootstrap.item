----item----
version: 1
id: {BA54F3EC-6DBE-424C-92A1-3E5057E1782C}
database: master
path: /sitecore/media library/Base Themes/Core Libraries/scripts/bootstrap
parent: {E3FBF2BD-14B5-439F-B488-478701F1BAE1}
name: bootstrap
master: {00000000-0000-0000-0000-000000000000}
template: {962B53C4-F93B-4DF9-9821-415C867B8903}
templatekey: File
created: 20171204T154911Z

----field----
field: {40E50ED9-BA07-4702-992E-A912738D32DC}
name: Blob
key: blob
content-length: 98640

LyohDQogKiBCb290c3RyYXAgdjMuMy43IChodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbSkNCiAqIENv
cHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLg0KICogTGljZW5zZWQgdW5kZXIgdGhlIE1J
VCBsaWNlbnNlDQogKi8NCg0KaWYgKHR5cGVvZiBqUXVlcnkgPT09ICd1bmRlZmluZWQnKSB7DQog
IHRocm93IG5ldyBFcnJvcignQm9vdHN0cmFwXCdzIEphdmFTY3JpcHQgcmVxdWlyZXMgalF1ZXJ5
JykNCn0NCg0KK2Z1bmN0aW9uICgkKSB7DQogICd1c2Ugc3RyaWN0JzsNCiAgdmFyIHZlcnNpb24g
PSAkLmZuLmpxdWVyeS5zcGxpdCgnICcpWzBdLnNwbGl0KCcuJykNCiAgaWYgKCh2ZXJzaW9uWzBd
IDwgMiAmJiB2ZXJzaW9uWzFdIDwgOSkgfHwgKHZlcnNpb25bMF0gPT0gMSAmJiB2ZXJzaW9uWzFd
ID09IDkgJiYgdmVyc2lvblsyXSA8IDEpIHx8ICh2ZXJzaW9uWzBdID4gMykpIHsNCiAgICB0aHJv
dyBuZXcgRXJyb3IoJ0Jvb3RzdHJhcFwncyBKYXZhU2NyaXB0IHJlcXVpcmVzIGpRdWVyeSB2ZXJz
aW9uIDEuOS4xIG9yIGhpZ2hlciwgYnV0IGxvd2VyIHRoYW4gdmVyc2lvbiA0JykNCiAgfQ0KfShq
UXVlcnkpOw0KDQovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAqIEJvb3RzdHJhcDogdHJhbnNpdGlvbi5q
cyB2My4zLjcNCiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI3RyYW5zaXRp
b25zDQogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0NCiAqIENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwg
SW5jLg0KICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290
c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSkNCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLw0KDQoNCitm
dW5jdGlvbiAoJCkgew0KICAndXNlIHN0cmljdCc7DQoNCiAgLy8gQ1NTIFRSQU5TSVRJT04gU1VQ
UE9SVCAoU2hvdXRvdXQ6IGh0dHA6Ly93d3cubW9kZXJuaXpyLmNvbS8pDQogIC8vID09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KDQog
IGZ1bmN0aW9uIHRyYW5zaXRpb25FbmQoKSB7DQogICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRl
RWxlbWVudCgnYm9vdHN0cmFwJykNCg0KICAgIHZhciB0cmFuc0VuZEV2ZW50TmFtZXMgPSB7DQog
ICAgICBXZWJraXRUcmFuc2l0aW9uIDogJ3dlYmtpdFRyYW5zaXRpb25FbmQnLA0KICAgICAgTW96
VHJhbnNpdGlvbiAgICA6ICd0cmFuc2l0aW9uZW5kJywNCiAgICAgIE9UcmFuc2l0aW9uICAgICAg
OiAnb1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmQnLA0KICAgICAgdHJhbnNpdGlvbiAgICAg
ICA6ICd0cmFuc2l0aW9uZW5kJw0KICAgIH0NCg0KICAgIGZvciAodmFyIG5hbWUgaW4gdHJhbnNF
bmRFdmVudE5hbWVzKSB7DQogICAgICBpZiAoZWwuc3R5bGVbbmFtZV0gIT09IHVuZGVmaW5lZCkg
ew0KICAgICAgICByZXR1cm4geyBlbmQ6IHRyYW5zRW5kRXZlbnROYW1lc1tuYW1lXSB9DQogICAg
ICB9DQogICAgfQ0KDQogICAgcmV0dXJuIGZhbHNlIC8vIGV4cGxpY2l0IGZvciBpZTggKCAgLl8u
KQ0KICB9DQoNCiAgLy8gaHR0cDovL2Jsb2cuYWxleG1hY2Nhdy5jb20vY3NzLXRyYW5zaXRpb25z
DQogICQuZm4uZW11bGF0ZVRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiAoZHVyYXRpb24pIHsNCiAg
ICB2YXIgY2FsbGVkID0gZmFsc2UNCiAgICB2YXIgJGVsID0gdGhpcw0KICAgICQodGhpcykub25l
KCdic1RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbiAoKSB7IGNhbGxlZCA9IHRydWUgfSkNCiAgICB2
YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7IGlmICghY2FsbGVkKSAkKCRlbCkudHJpZ2dlcigk
LnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpIH0NCiAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCBkdXJh
dGlvbikNCiAgICByZXR1cm4gdGhpcw0KICB9DQoNCiAgJChmdW5jdGlvbiAoKSB7DQogICAgJC5z
dXBwb3J0LnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uRW5kKCkNCg0KICAgIGlmICghJC5zdXBwb3J0
LnRyYW5zaXRpb24pIHJldHVybg0KDQogICAgJC5ldmVudC5zcGVjaWFsLmJzVHJhbnNpdGlvbkVu
ZCA9IHsNCiAgICAgIGJpbmRUeXBlOiAkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsDQogICAgICBk
ZWxlZ2F0ZVR5cGU6ICQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCwNCiAgICAgIGhhbmRsZTogZnVu
Y3Rpb24gKGUpIHsNCiAgICAgICAgaWYgKCQoZS50YXJnZXQpLmlzKHRoaXMpKSByZXR1cm4gZS5o
YW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpDQogICAgICB9DQogICAgfQ0K
ICB9KQ0KDQp9KGpRdWVyeSk7DQoNCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICogQm9vdHN0cmFwOiBh
bGVydC5qcyB2My4zLjcNCiAqIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2Fs
ZXJ0cw0KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09DQogKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFR3aXR0ZXIs
IEluYy4NCiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9v
dHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpDQogKiA9PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8NCg0KDQor
ZnVuY3Rpb24gKCQpIHsNCiAgJ3VzZSBzdHJpY3QnOw0KDQogIC8vIEFMRVJUIENMQVNTIERFRklO
SVRJT04NCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PQ0KDQogIHZhciBkaXNtaXNzID0gJ1tk
YXRhLWRpc21pc3M9ImFsZXJ0Il0nDQogIHZhciBBbGVydCAgID0gZnVuY3Rpb24gKGVsKSB7DQog
ICAgJChlbCkub24oJ2NsaWNrJywgZGlzbWlzcywgdGhpcy5jbG9zZSkNCiAgfQ0KDQogIEFsZXJ0
LlZFUlNJT04gPSAnMy4zLjcnDQoNCiAgQWxlcnQuVFJBTlNJVElPTl9EVVJBVElPTiA9IDE1MA0K
DQogIEFsZXJ0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uIChlKSB7DQogICAgdmFyICR0aGlz
ICAgID0gJCh0aGlzKQ0KICAgIHZhciBzZWxlY3RvciA9ICR0aGlzLmF0dHIoJ2RhdGEtdGFyZ2V0
JykNCg0KICAgIGlmICghc2VsZWN0b3IpIHsNCiAgICAgIHNlbGVjdG9yID0gJHRoaXMuYXR0cign
aHJlZicpDQogICAgICBzZWxlY3RvciA9IHNlbGVjdG9yICYmIHNlbGVjdG9yLnJlcGxhY2UoLy4q
KD89I1teXHNdKiQpLywgJycpIC8vIHN0cmlwIGZvciBpZTcNCiAgICB9DQoNCiAgICB2YXIgJHBh
cmVudCA9ICQoc2VsZWN0b3IgPT09ICcjJyA/IFtdIDogc2VsZWN0b3IpDQoNCiAgICBpZiAoZSkg
ZS5wcmV2ZW50RGVmYXVsdCgpDQoNCiAgICBpZiAoISRwYXJlbnQubGVuZ3RoKSB7DQogICAgICAk
cGFyZW50ID0gJHRoaXMuY2xvc2VzdCgnLmFsZXJ0JykNCiAgICB9DQoNCiAgICAkcGFyZW50LnRy
aWdnZXIoZSA9ICQuRXZlbnQoJ2Nsb3NlLmJzLmFsZXJ0JykpDQoNCiAgICBpZiAoZS5pc0RlZmF1
bHRQcmV2ZW50ZWQoKSkgcmV0dXJuDQoNCiAgICAkcGFyZW50LnJlbW92ZUNsYXNzKCdpbicpDQoN
CiAgICBmdW5jdGlvbiByZW1vdmVFbGVtZW50KCkgew0KICAgICAgLy8gZGV0YWNoIGZyb20gcGFy
ZW50LCBmaXJlIGV2ZW50IHRoZW4gY2xlYW4gdXAgZGF0YQ0KICAgICAgJHBhcmVudC5kZXRhY2go
KS50cmlnZ2VyKCdjbG9zZWQuYnMuYWxlcnQnKS5yZW1vdmUoKQ0KICAgIH0NCg0KICAgICQuc3Vw
cG9ydC50cmFuc2l0aW9uICYmICRwYXJlbnQuaGFzQ2xhc3MoJ2ZhZGUnKSA/DQogICAgICAkcGFy
ZW50DQogICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIHJlbW92ZUVsZW1lbnQpDQogICAg
ICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChBbGVydC5UUkFOU0lUSU9OX0RVUkFUSU9OKSA6DQog
ICAgICByZW1vdmVFbGVtZW50KCkNCiAgfQ0KDQoNCiAgLy8gQUxFUlQgUExVR0lOIERFRklOSVRJ
T04NCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT0NCg0KICBmdW5jdGlvbiBQbHVnaW4ob3B0
aW9uKSB7DQogICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgJHRo
aXMgPSAkKHRoaXMpDQogICAgICB2YXIgZGF0YSAgPSAkdGhpcy5kYXRhKCdicy5hbGVydCcpDQoN
CiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuYWxlcnQnLCAoZGF0YSA9IG5ldyBBbGVy
dCh0aGlzKSkpDQogICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRp
b25dLmNhbGwoJHRoaXMpDQogICAgfSkNCiAgfQ0KDQogIHZhciBvbGQgPSAkLmZuLmFsZXJ0DQoN
CiAgJC5mbi5hbGVydCAgICAgICAgICAgICA9IFBsdWdpbg0KICAkLmZuLmFsZXJ0LkNvbnN0cnVj
dG9yID0gQWxlcnQNCg0KDQogIC8vIEFMRVJUIE5PIENPTkZMSUNUDQogIC8vID09PT09PT09PT09
PT09PT09DQoNCiAgJC5mbi5hbGVydC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkgew0KICAgICQu
Zm4uYWxlcnQgPSBvbGQNCiAgICByZXR1cm4gdGhpcw0KICB9DQoNCg0KICAvLyBBTEVSVCBEQVRB
LUFQSQ0KICAvLyA9PT09PT09PT09PT09PQ0KDQogICQoZG9jdW1lbnQpLm9uKCdjbGljay5icy5h
bGVydC5kYXRhLWFwaScsIGRpc21pc3MsIEFsZXJ0LnByb3RvdHlwZS5jbG9zZSkNCg0KfShqUXVl
cnkpOw0KDQovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAqIEJvb3RzdHJhcDogYnV0dG9uLmpzIHYzLjMu
Nw0KICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jYnV0dG9ucw0KICogPT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09DQogKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFR3aXR0ZXIsIEluYy4NCiAqIExp
Y2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2Iv
bWFzdGVyL0xJQ0VOU0UpDQogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8NCg0KDQorZnVuY3Rpb24gKCQp
IHsNCiAgJ3VzZSBzdHJpY3QnOw0KDQogIC8vIEJVVFRPTiBQVUJMSUMgQ0xBU1MgREVGSU5JVElP
Tg0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCg0KICB2YXIgQnV0dG9uID0g
ZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHsNCiAgICB0aGlzLiRlbGVtZW50ICA9ICQoZWxl
bWVudCkNCiAgICB0aGlzLm9wdGlvbnMgICA9ICQuZXh0ZW5kKHt9LCBCdXR0b24uREVGQVVMVFMs
IG9wdGlvbnMpDQogICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQ0KICB9DQoNCiAgQnV0dG9uLlZF
UlNJT04gID0gJzMuMy43Jw0KDQogIEJ1dHRvbi5ERUZBVUxUUyA9IHsNCiAgICBsb2FkaW5nVGV4
dDogJ2xvYWRpbmcuLi4nDQogIH0NCg0KICBCdXR0b24ucHJvdG90eXBlLnNldFN0YXRlID0gZnVu
Y3Rpb24gKHN0YXRlKSB7DQogICAgdmFyIGQgICAgPSAnZGlzYWJsZWQnDQogICAgdmFyICRlbCAg
PSB0aGlzLiRlbGVtZW50DQogICAgdmFyIHZhbCAgPSAkZWwuaXMoJ2lucHV0JykgPyAndmFsJyA6
ICdodG1sJw0KICAgIHZhciBkYXRhID0gJGVsLmRhdGEoKQ0KDQogICAgc3RhdGUgKz0gJ1RleHQn
DQoNCiAgICBpZiAoZGF0YS5yZXNldFRleHQgPT0gbnVsbCkgJGVsLmRhdGEoJ3Jlc2V0VGV4dCcs
ICRlbFt2YWxdKCkpDQoNCiAgICAvLyBwdXNoIHRvIGV2ZW50IGxvb3AgdG8gYWxsb3cgZm9ybXMg
dG8gc3VibWl0DQogICAgc2V0VGltZW91dCgkLnByb3h5KGZ1bmN0aW9uICgpIHsNCiAgICAgICRl
bFt2YWxdKGRhdGFbc3RhdGVdID09IG51bGwgPyB0aGlzLm9wdGlvbnNbc3RhdGVdIDogZGF0YVtz
dGF0ZV0pDQoNCiAgICAgIGlmIChzdGF0ZSA9PSAnbG9hZGluZ1RleHQnKSB7DQogICAgICAgIHRo
aXMuaXNMb2FkaW5nID0gdHJ1ZQ0KICAgICAgICAkZWwuYWRkQ2xhc3MoZCkuYXR0cihkLCBkKS5w
cm9wKGQsIHRydWUpDQogICAgICB9IGVsc2UgaWYgKHRoaXMuaXNMb2FkaW5nKSB7DQogICAgICAg
IHRoaXMuaXNMb2FkaW5nID0gZmFsc2UNCiAgICAgICAgJGVsLnJlbW92ZUNsYXNzKGQpLnJlbW92
ZUF0dHIoZCkucHJvcChkLCBmYWxzZSkNCiAgICAgIH0NCiAgICB9LCB0aGlzKSwgMCkNCiAgfQ0K
DQogIEJ1dHRvbi5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciBjaGFu
Z2VkID0gdHJ1ZQ0KICAgIHZhciAkcGFyZW50ID0gdGhpcy4kZWxlbWVudC5jbG9zZXN0KCdbZGF0
YS10b2dnbGU9ImJ1dHRvbnMiXScpDQoNCiAgICBpZiAoJHBhcmVudC5sZW5ndGgpIHsNCiAgICAg
IHZhciAkaW5wdXQgPSB0aGlzLiRlbGVtZW50LmZpbmQoJ2lucHV0JykNCiAgICAgIGlmICgkaW5w
dXQucHJvcCgndHlwZScpID09ICdyYWRpbycpIHsNCiAgICAgICAgaWYgKCRpbnB1dC5wcm9wKCdj
aGVja2VkJykpIGNoYW5nZWQgPSBmYWxzZQ0KICAgICAgICAkcGFyZW50LmZpbmQoJy5hY3RpdmUn
KS5yZW1vdmVDbGFzcygnYWN0aXZlJykNCiAgICAgICAgdGhpcy4kZWxlbWVudC5hZGRDbGFzcygn
YWN0aXZlJykNCiAgICAgIH0gZWxzZSBpZiAoJGlucHV0LnByb3AoJ3R5cGUnKSA9PSAnY2hlY2ti
b3gnKSB7DQogICAgICAgIGlmICgoJGlucHV0LnByb3AoJ2NoZWNrZWQnKSkgIT09IHRoaXMuJGVs
ZW1lbnQuaGFzQ2xhc3MoJ2FjdGl2ZScpKSBjaGFuZ2VkID0gZmFsc2UNCiAgICAgICAgdGhpcy4k
ZWxlbWVudC50b2dnbGVDbGFzcygnYWN0aXZlJykNCiAgICAgIH0NCiAgICAgICRpbnB1dC5wcm9w
KCdjaGVja2VkJywgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnYWN0aXZlJykpDQogICAgICBpZiAo
Y2hhbmdlZCkgJGlucHV0LnRyaWdnZXIoJ2NoYW5nZScpDQogICAgfSBlbHNlIHsNCiAgICAgIHRo
aXMuJGVsZW1lbnQuYXR0cignYXJpYS1wcmVzc2VkJywgIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3Mo
J2FjdGl2ZScpKQ0KICAgICAgdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcygnYWN0aXZlJykNCiAg
ICB9DQogIH0NCg0KDQogIC8vIEJVVFRPTiBQTFVHSU4gREVGSU5JVElPTg0KICAvLyA9PT09PT09
PT09PT09PT09PT09PT09PT0NCg0KICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7DQogICAgcmV0
dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgJHRoaXMgICA9ICQodGhpcykN
CiAgICAgIHZhciBkYXRhICAgID0gJHRoaXMuZGF0YSgnYnMuYnV0dG9uJykNCiAgICAgIHZhciBv
cHRpb25zID0gdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb24NCg0KICAgICAgaWYg
KCFkYXRhKSAkdGhpcy5kYXRhKCdicy5idXR0b24nLCAoZGF0YSA9IG5ldyBCdXR0b24odGhpcywg
b3B0aW9ucykpKQ0KDQogICAgICBpZiAob3B0aW9uID09ICd0b2dnbGUnKSBkYXRhLnRvZ2dsZSgp
DQogICAgICBlbHNlIGlmIChvcHRpb24pIGRhdGEuc2V0U3RhdGUob3B0aW9uKQ0KICAgIH0pDQog
IH0NCg0KICB2YXIgb2xkID0gJC5mbi5idXR0b24NCg0KICAkLmZuLmJ1dHRvbiAgICAgICAgICAg
ICA9IFBsdWdpbg0KICAkLmZuLmJ1dHRvbi5Db25zdHJ1Y3RvciA9IEJ1dHRvbg0KDQoNCiAgLy8g
QlVUVE9OIE5PIENPTkZMSUNUDQogIC8vID09PT09PT09PT09PT09PT09PQ0KDQogICQuZm4uYnV0
dG9uLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7DQogICAgJC5mbi5idXR0b24gPSBvbGQNCiAg
ICByZXR1cm4gdGhpcw0KICB9DQoNCg0KICAvLyBCVVRUT04gREFUQS1BUEkNCiAgLy8gPT09PT09
PT09PT09PT09DQoNCiAgJChkb2N1bWVudCkNCiAgICAub24oJ2NsaWNrLmJzLmJ1dHRvbi5kYXRh
LWFwaScsICdbZGF0YS10b2dnbGVePSJidXR0b24iXScsIGZ1bmN0aW9uIChlKSB7DQogICAgICB2
YXIgJGJ0biA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5idG4nKQ0KICAgICAgUGx1Z2luLmNhbGwo
JGJ0biwgJ3RvZ2dsZScpDQogICAgICBpZiAoISgkKGUudGFyZ2V0KS5pcygnaW5wdXRbdHlwZT0i
cmFkaW8iXSwgaW5wdXRbdHlwZT0iY2hlY2tib3giXScpKSkgew0KICAgICAgICAvLyBQcmV2ZW50
IGRvdWJsZSBjbGljayBvbiByYWRpb3MsIGFuZCB0aGUgZG91YmxlIHNlbGVjdGlvbnMgKHNvIGNh
bmNlbGxhdGlvbikgb24gY2hlY2tib3hlcw0KICAgICAgICBlLnByZXZlbnREZWZhdWx0KCkNCiAg
ICAgICAgLy8gVGhlIHRhcmdldCBjb21wb25lbnQgc3RpbGwgcmVjZWl2ZSB0aGUgZm9jdXMNCiAg
ICAgICAgaWYgKCRidG4uaXMoJ2lucHV0LGJ1dHRvbicpKSAkYnRuLnRyaWdnZXIoJ2ZvY3VzJykN
CiAgICAgICAgZWxzZSAkYnRuLmZpbmQoJ2lucHV0OnZpc2libGUsYnV0dG9uOnZpc2libGUnKS5m
aXJzdCgpLnRyaWdnZXIoJ2ZvY3VzJykNCiAgICAgIH0NCiAgICB9KQ0KICAgIC5vbignZm9jdXMu
YnMuYnV0dG9uLmRhdGEtYXBpIGJsdXIuYnMuYnV0dG9uLmRhdGEtYXBpJywgJ1tkYXRhLXRvZ2ds
ZV49ImJ1dHRvbiJdJywgZnVuY3Rpb24gKGUpIHsNCiAgICAgICQoZS50YXJnZXQpLmNsb3Nlc3Qo
Jy5idG4nKS50b2dnbGVDbGFzcygnZm9jdXMnLCAvXmZvY3VzKGluKT8kLy50ZXN0KGUudHlwZSkp
DQogICAgfSkNCg0KfShqUXVlcnkpOw0KDQovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAqIEJvb3RzdHJh
cDogY2Fyb3VzZWwuanMgdjMuMy43DQogKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2Ny
aXB0LyNjYXJvdXNlbA0KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQogKiBDb3B5cmlnaHQgMjAxMS0yMDE2
IFR3aXR0ZXIsIEluYy4NCiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29t
L3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpDQogKiA9PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0g
Ki8NCg0KDQorZnVuY3Rpb24gKCQpIHsNCiAgJ3VzZSBzdHJpY3QnOw0KDQogIC8vIENBUk9VU0VM
IENMQVNTIERFRklOSVRJT04NCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQ0KDQogIHZh
ciBDYXJvdXNlbCA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7DQogICAgdGhpcy4kZWxl
bWVudCAgICA9ICQoZWxlbWVudCkNCiAgICB0aGlzLiRpbmRpY2F0b3JzID0gdGhpcy4kZWxlbWVu
dC5maW5kKCcuY2Fyb3VzZWwtaW5kaWNhdG9ycycpDQogICAgdGhpcy5vcHRpb25zICAgICA9IG9w
dGlvbnMNCiAgICB0aGlzLnBhdXNlZCAgICAgID0gbnVsbA0KICAgIHRoaXMuc2xpZGluZyAgICAg
PSBudWxsDQogICAgdGhpcy5pbnRlcnZhbCAgICA9IG51bGwNCiAgICB0aGlzLiRhY3RpdmUgICAg
ID0gbnVsbA0KICAgIHRoaXMuJGl0ZW1zICAgICAgPSBudWxsDQoNCiAgICB0aGlzLm9wdGlvbnMu
a2V5Ym9hcmQgJiYgdGhpcy4kZWxlbWVudC5vbigna2V5ZG93bi5icy5jYXJvdXNlbCcsICQucHJv
eHkodGhpcy5rZXlkb3duLCB0aGlzKSkNCg0KICAgIHRoaXMub3B0aW9ucy5wYXVzZSA9PSAnaG92
ZXInICYmICEoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSAmJiB0
aGlzLiRlbGVtZW50DQogICAgICAub24oJ21vdXNlZW50ZXIuYnMuY2Fyb3VzZWwnLCAkLnByb3h5
KHRoaXMucGF1c2UsIHRoaXMpKQ0KICAgICAgLm9uKCdtb3VzZWxlYXZlLmJzLmNhcm91c2VsJywg
JC5wcm94eSh0aGlzLmN5Y2xlLCB0aGlzKSkNCiAgfQ0KDQogIENhcm91c2VsLlZFUlNJT04gID0g
JzMuMy43Jw0KDQogIENhcm91c2VsLlRSQU5TSVRJT05fRFVSQVRJT04gPSA2MDANCg0KICBDYXJv
dXNlbC5ERUZBVUxUUyA9IHsNCiAgICBpbnRlcnZhbDogNTAwMCwNCiAgICBwYXVzZTogJ2hvdmVy
JywNCiAgICB3cmFwOiB0cnVlLA0KICAgIGtleWJvYXJkOiB0cnVlDQogIH0NCg0KICBDYXJvdXNl
bC5wcm90b3R5cGUua2V5ZG93biA9IGZ1bmN0aW9uIChlKSB7DQogICAgaWYgKC9pbnB1dHx0ZXh0
YXJlYS9pLnRlc3QoZS50YXJnZXQudGFnTmFtZSkpIHJldHVybg0KICAgIHN3aXRjaCAoZS53aGlj
aCkgew0KICAgICAgY2FzZSAzNzogdGhpcy5wcmV2KCk7IGJyZWFrDQogICAgICBjYXNlIDM5OiB0
aGlzLm5leHQoKTsgYnJlYWsNCiAgICAgIGRlZmF1bHQ6IHJldHVybg0KICAgIH0NCg0KICAgIGUu
cHJldmVudERlZmF1bHQoKQ0KICB9DQoNCiAgQ2Fyb3VzZWwucHJvdG90eXBlLmN5Y2xlID0gZnVu
Y3Rpb24gKGUpIHsNCiAgICBlIHx8ICh0aGlzLnBhdXNlZCA9IGZhbHNlKQ0KDQogICAgdGhpcy5p
bnRlcnZhbCAmJiBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpDQoNCiAgICB0aGlzLm9wdGlv
bnMuaW50ZXJ2YWwNCiAgICAgICYmICF0aGlzLnBhdXNlZA0KICAgICAgJiYgKHRoaXMuaW50ZXJ2
YWwgPSBzZXRJbnRlcnZhbCgkLnByb3h5KHRoaXMubmV4dCwgdGhpcyksIHRoaXMub3B0aW9ucy5p
bnRlcnZhbCkpDQoNCiAgICByZXR1cm4gdGhpcw0KICB9DQoNCiAgQ2Fyb3VzZWwucHJvdG90eXBl
LmdldEl0ZW1JbmRleCA9IGZ1bmN0aW9uIChpdGVtKSB7DQogICAgdGhpcy4kaXRlbXMgPSBpdGVt
LnBhcmVudCgpLmNoaWxkcmVuKCcuaXRlbScpDQogICAgcmV0dXJuIHRoaXMuJGl0ZW1zLmluZGV4
KGl0ZW0gfHwgdGhpcy4kYWN0aXZlKQ0KICB9DQoNCiAgQ2Fyb3VzZWwucHJvdG90eXBlLmdldEl0
ZW1Gb3JEaXJlY3Rpb24gPSBmdW5jdGlvbiAoZGlyZWN0aW9uLCBhY3RpdmUpIHsNCiAgICB2YXIg
YWN0aXZlSW5kZXggPSB0aGlzLmdldEl0ZW1JbmRleChhY3RpdmUpDQogICAgdmFyIHdpbGxXcmFw
ID0gKGRpcmVjdGlvbiA9PSAncHJldicgJiYgYWN0aXZlSW5kZXggPT09IDApDQogICAgICAgICAg
ICAgICAgfHwgKGRpcmVjdGlvbiA9PSAnbmV4dCcgJiYgYWN0aXZlSW5kZXggPT0gKHRoaXMuJGl0
ZW1zLmxlbmd0aCAtIDEpKQ0KICAgIGlmICh3aWxsV3JhcCAmJiAhdGhpcy5vcHRpb25zLndyYXAp
IHJldHVybiBhY3RpdmUNCiAgICB2YXIgZGVsdGEgPSBkaXJlY3Rpb24gPT0gJ3ByZXYnID8gLTEg
OiAxDQogICAgdmFyIGl0ZW1JbmRleCA9IChhY3RpdmVJbmRleCArIGRlbHRhKSAlIHRoaXMuJGl0
ZW1zLmxlbmd0aA0KICAgIHJldHVybiB0aGlzLiRpdGVtcy5lcShpdGVtSW5kZXgpDQogIH0NCg0K
ICBDYXJvdXNlbC5wcm90b3R5cGUudG8gPSBmdW5jdGlvbiAocG9zKSB7DQogICAgdmFyIHRoYXQg
ICAgICAgID0gdGhpcw0KICAgIHZhciBhY3RpdmVJbmRleCA9IHRoaXMuZ2V0SXRlbUluZGV4KHRo
aXMuJGFjdGl2ZSA9IHRoaXMuJGVsZW1lbnQuZmluZCgnLml0ZW0uYWN0aXZlJykpDQoNCiAgICBp
ZiAocG9zID4gKHRoaXMuJGl0ZW1zLmxlbmd0aCAtIDEpIHx8IHBvcyA8IDApIHJldHVybg0KDQog
ICAgaWYgKHRoaXMuc2xpZGluZykgICAgICAgcmV0dXJuIHRoaXMuJGVsZW1lbnQub25lKCdzbGlk
LmJzLmNhcm91c2VsJywgZnVuY3Rpb24gKCkgeyB0aGF0LnRvKHBvcykgfSkgLy8geWVzLCAic2xp
ZCINCiAgICBpZiAoYWN0aXZlSW5kZXggPT0gcG9zKSByZXR1cm4gdGhpcy5wYXVzZSgpLmN5Y2xl
KCkNCg0KICAgIHJldHVybiB0aGlzLnNsaWRlKHBvcyA+IGFjdGl2ZUluZGV4ID8gJ25leHQnIDog
J3ByZXYnLCB0aGlzLiRpdGVtcy5lcShwb3MpKQ0KICB9DQoNCiAgQ2Fyb3VzZWwucHJvdG90eXBl
LnBhdXNlID0gZnVuY3Rpb24gKGUpIHsNCiAgICBlIHx8ICh0aGlzLnBhdXNlZCA9IHRydWUpDQoN
CiAgICBpZiAodGhpcy4kZWxlbWVudC5maW5kKCcubmV4dCwgLnByZXYnKS5sZW5ndGggJiYgJC5z
dXBwb3J0LnRyYW5zaXRpb24pIHsNCiAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcigkLnN1cHBv
cnQudHJhbnNpdGlvbi5lbmQpDQogICAgICB0aGlzLmN5Y2xlKHRydWUpDQogICAgfQ0KDQogICAg
dGhpcy5pbnRlcnZhbCA9IGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCkNCg0KICAgIHJldHVy
biB0aGlzDQogIH0NCg0KICBDYXJvdXNlbC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHsN
CiAgICBpZiAodGhpcy5zbGlkaW5nKSByZXR1cm4NCiAgICByZXR1cm4gdGhpcy5zbGlkZSgnbmV4
dCcpDQogIH0NCg0KICBDYXJvdXNlbC5wcm90b3R5cGUucHJldiA9IGZ1bmN0aW9uICgpIHsNCiAg
ICBpZiAodGhpcy5zbGlkaW5nKSByZXR1cm4NCiAgICByZXR1cm4gdGhpcy5zbGlkZSgncHJldicp
DQogIH0NCg0KICBDYXJvdXNlbC5wcm90b3R5cGUuc2xpZGUgPSBmdW5jdGlvbiAodHlwZSwgbmV4
dCkgew0KICAgIHZhciAkYWN0aXZlICAgPSB0aGlzLiRlbGVtZW50LmZpbmQoJy5pdGVtLmFjdGl2
ZScpDQogICAgdmFyICRuZXh0ICAgICA9IG5leHQgfHwgdGhpcy5nZXRJdGVtRm9yRGlyZWN0aW9u
KHR5cGUsICRhY3RpdmUpDQogICAgdmFyIGlzQ3ljbGluZyA9IHRoaXMuaW50ZXJ2YWwNCiAgICB2
YXIgZGlyZWN0aW9uID0gdHlwZSA9PSAnbmV4dCcgPyAnbGVmdCcgOiAncmlnaHQnDQogICAgdmFy
IHRoYXQgICAgICA9IHRoaXMNCg0KICAgIGlmICgkbmV4dC5oYXNDbGFzcygnYWN0aXZlJykpIHJl
dHVybiAodGhpcy5zbGlkaW5nID0gZmFsc2UpDQoNCiAgICB2YXIgcmVsYXRlZFRhcmdldCA9ICRu
ZXh0WzBdDQogICAgdmFyIHNsaWRlRXZlbnQgPSAkLkV2ZW50KCdzbGlkZS5icy5jYXJvdXNlbCcs
IHsNCiAgICAgIHJlbGF0ZWRUYXJnZXQ6IHJlbGF0ZWRUYXJnZXQsDQogICAgICBkaXJlY3Rpb246
IGRpcmVjdGlvbg0KICAgIH0pDQogICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKHNsaWRlRXZlbnQp
DQogICAgaWYgKHNsaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVybg0KDQogICAg
dGhpcy5zbGlkaW5nID0gdHJ1ZQ0KDQogICAgaXNDeWNsaW5nICYmIHRoaXMucGF1c2UoKQ0KDQog
ICAgaWYgKHRoaXMuJGluZGljYXRvcnMubGVuZ3RoKSB7DQogICAgICB0aGlzLiRpbmRpY2F0b3Jz
LmZpbmQoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJykNCiAgICAgIHZhciAkbmV4dElu
ZGljYXRvciA9ICQodGhpcy4kaW5kaWNhdG9ycy5jaGlsZHJlbigpW3RoaXMuZ2V0SXRlbUluZGV4
KCRuZXh0KV0pDQogICAgICAkbmV4dEluZGljYXRvciAmJiAkbmV4dEluZGljYXRvci5hZGRDbGFz
cygnYWN0aXZlJykNCiAgICB9DQoNCiAgICB2YXIgc2xpZEV2ZW50ID0gJC5FdmVudCgnc2xpZC5i
cy5jYXJvdXNlbCcsIHsgcmVsYXRlZFRhcmdldDogcmVsYXRlZFRhcmdldCwgZGlyZWN0aW9uOiBk
aXJlY3Rpb24gfSkgLy8geWVzLCAic2xpZCINCiAgICBpZiAoJC5zdXBwb3J0LnRyYW5zaXRpb24g
JiYgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnc2xpZGUnKSkgew0KICAgICAgJG5leHQuYWRkQ2xh
c3ModHlwZSkNCiAgICAgICRuZXh0WzBdLm9mZnNldFdpZHRoIC8vIGZvcmNlIHJlZmxvdw0KICAg
ICAgJGFjdGl2ZS5hZGRDbGFzcyhkaXJlY3Rpb24pDQogICAgICAkbmV4dC5hZGRDbGFzcyhkaXJl
Y3Rpb24pDQogICAgICAkYWN0aXZlDQogICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGZ1
bmN0aW9uICgpIHsNCiAgICAgICAgICAkbmV4dC5yZW1vdmVDbGFzcyhbdHlwZSwgZGlyZWN0aW9u
XS5qb2luKCcgJykpLmFkZENsYXNzKCdhY3RpdmUnKQ0KICAgICAgICAgICRhY3RpdmUucmVtb3Zl
Q2xhc3MoWydhY3RpdmUnLCBkaXJlY3Rpb25dLmpvaW4oJyAnKSkNCiAgICAgICAgICB0aGF0LnNs
aWRpbmcgPSBmYWxzZQ0KICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAg
ICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKHNsaWRFdmVudCkNCiAgICAgICAgICB9LCAwKQ0K
ICAgICAgICB9KQ0KICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoQ2Fyb3VzZWwuVFJBTlNJ
VElPTl9EVVJBVElPTikNCiAgICB9IGVsc2Ugew0KICAgICAgJGFjdGl2ZS5yZW1vdmVDbGFzcygn
YWN0aXZlJykNCiAgICAgICRuZXh0LmFkZENsYXNzKCdhY3RpdmUnKQ0KICAgICAgdGhpcy5zbGlk
aW5nID0gZmFsc2UNCiAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihzbGlkRXZlbnQpDQogICAg
fQ0KDQogICAgaXNDeWNsaW5nICYmIHRoaXMuY3ljbGUoKQ0KDQogICAgcmV0dXJuIHRoaXMNCiAg
fQ0KDQoNCiAgLy8gQ0FST1VTRUwgUExVR0lOIERFRklOSVRJT04NCiAgLy8gPT09PT09PT09PT09
PT09PT09PT09PT09PT0NCg0KICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7DQogICAgcmV0dXJu
IHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgJHRoaXMgICA9ICQodGhpcykNCiAg
ICAgIHZhciBkYXRhICAgID0gJHRoaXMuZGF0YSgnYnMuY2Fyb3VzZWwnKQ0KICAgICAgdmFyIG9w
dGlvbnMgPSAkLmV4dGVuZCh7fSwgQ2Fyb3VzZWwuREVGQVVMVFMsICR0aGlzLmRhdGEoKSwgdHlw
ZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb24pDQogICAgICB2YXIgYWN0aW9uICA9IHR5
cGVvZiBvcHRpb24gPT0gJ3N0cmluZycgPyBvcHRpb24gOiBvcHRpb25zLnNsaWRlDQoNCiAgICAg
IGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuY2Fyb3VzZWwnLCAoZGF0YSA9IG5ldyBDYXJvdXNl
bCh0aGlzLCBvcHRpb25zKSkpDQogICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnbnVtYmVyJykg
ZGF0YS50byhvcHRpb24pDQogICAgICBlbHNlIGlmIChhY3Rpb24pIGRhdGFbYWN0aW9uXSgpDQog
ICAgICBlbHNlIGlmIChvcHRpb25zLmludGVydmFsKSBkYXRhLnBhdXNlKCkuY3ljbGUoKQ0KICAg
IH0pDQogIH0NCg0KICB2YXIgb2xkID0gJC5mbi5jYXJvdXNlbA0KDQogICQuZm4uY2Fyb3VzZWwg
ICAgICAgICAgICAgPSBQbHVnaW4NCiAgJC5mbi5jYXJvdXNlbC5Db25zdHJ1Y3RvciA9IENhcm91
c2VsDQoNCg0KICAvLyBDQVJPVVNFTCBOTyBDT05GTElDVA0KICAvLyA9PT09PT09PT09PT09PT09
PT09PQ0KDQogICQuZm4uY2Fyb3VzZWwubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHsNCiAgICAk
LmZuLmNhcm91c2VsID0gb2xkDQogICAgcmV0dXJuIHRoaXMNCiAgfQ0KDQoNCiAgLy8gQ0FST1VT
RUwgREFUQS1BUEkNCiAgLy8gPT09PT09PT09PT09PT09PT0NCg0KICB2YXIgY2xpY2tIYW5kbGVy
ID0gZnVuY3Rpb24gKGUpIHsNCiAgICB2YXIgaHJlZg0KICAgIHZhciAkdGhpcyAgID0gJCh0aGlz
KQ0KICAgIHZhciAkdGFyZ2V0ID0gJCgkdGhpcy5hdHRyKCdkYXRhLXRhcmdldCcpIHx8IChocmVm
ID0gJHRoaXMuYXR0cignaHJlZicpKSAmJiBocmVmLnJlcGxhY2UoLy4qKD89I1teXHNdKyQpLywg
JycpKSAvLyBzdHJpcCBmb3IgaWU3DQogICAgaWYgKCEkdGFyZ2V0Lmhhc0NsYXNzKCdjYXJvdXNl
bCcpKSByZXR1cm4NCiAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCAkdGFyZ2V0LmRhdGEo
KSwgJHRoaXMuZGF0YSgpKQ0KICAgIHZhciBzbGlkZUluZGV4ID0gJHRoaXMuYXR0cignZGF0YS1z
bGlkZS10bycpDQogICAgaWYgKHNsaWRlSW5kZXgpIG9wdGlvbnMuaW50ZXJ2YWwgPSBmYWxzZQ0K
DQogICAgUGx1Z2luLmNhbGwoJHRhcmdldCwgb3B0aW9ucykNCg0KICAgIGlmIChzbGlkZUluZGV4
KSB7DQogICAgICAkdGFyZ2V0LmRhdGEoJ2JzLmNhcm91c2VsJykudG8oc2xpZGVJbmRleCkNCiAg
ICB9DQoNCiAgICBlLnByZXZlbnREZWZhdWx0KCkNCiAgfQ0KDQogICQoZG9jdW1lbnQpDQogICAg
Lm9uKCdjbGljay5icy5jYXJvdXNlbC5kYXRhLWFwaScsICdbZGF0YS1zbGlkZV0nLCBjbGlja0hh
bmRsZXIpDQogICAgLm9uKCdjbGljay5icy5jYXJvdXNlbC5kYXRhLWFwaScsICdbZGF0YS1zbGlk
ZS10b10nLCBjbGlja0hhbmRsZXIpDQoNCiAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24g
KCkgew0KICAgICQoJ1tkYXRhLXJpZGU9ImNhcm91c2VsIl0nKS5lYWNoKGZ1bmN0aW9uICgpIHsN
CiAgICAgIHZhciAkY2Fyb3VzZWwgPSAkKHRoaXMpDQogICAgICBQbHVnaW4uY2FsbCgkY2Fyb3Vz
ZWwsICRjYXJvdXNlbC5kYXRhKCkpDQogICAgfSkNCiAgfSkNCg0KfShqUXVlcnkpOw0KDQovKiA9
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT0NCiAqIEJvb3RzdHJhcDogY29sbGFwc2UuanMgdjMuMy43DQogKiBodHRw
Oi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNjb2xsYXBzZQ0KICogPT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09DQogKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFR3aXR0ZXIsIEluYy4NCiAqIExpY2Vuc2VkIHVu
ZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJ
Q0VOU0UpDQogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8NCg0KLyoganNoaW50IGxhdGVkZWY6IGZhbHNl
ICovDQoNCitmdW5jdGlvbiAoJCkgew0KICAndXNlIHN0cmljdCc7DQoNCiAgLy8gQ09MTEFQU0Ug
UFVCTElDIENMQVNTIERFRklOSVRJT04NCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT0NCg0KICB2YXIgQ29sbGFwc2UgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykgew0K
ICAgIHRoaXMuJGVsZW1lbnQgICAgICA9ICQoZWxlbWVudCkNCiAgICB0aGlzLm9wdGlvbnMgICAg
ICAgPSAkLmV4dGVuZCh7fSwgQ29sbGFwc2UuREVGQVVMVFMsIG9wdGlvbnMpDQogICAgdGhpcy4k
dHJpZ2dlciAgICAgID0gJCgnW2RhdGEtdG9nZ2xlPSJjb2xsYXBzZSJdW2hyZWY9IiMnICsgZWxl
bWVudC5pZCArICciXSwnICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICdbZGF0YS10b2dn
bGU9ImNvbGxhcHNlIl1bZGF0YS10YXJnZXQ9IiMnICsgZWxlbWVudC5pZCArICciXScpDQogICAg
dGhpcy50cmFuc2l0aW9uaW5nID0gbnVsbA0KDQogICAgaWYgKHRoaXMub3B0aW9ucy5wYXJlbnQp
IHsNCiAgICAgIHRoaXMuJHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50KCkNCiAgICB9IGVsc2Ugew0K
ICAgICAgdGhpcy5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3ModGhpcy4kZWxlbWVudCwgdGhpcy4k
dHJpZ2dlcikNCiAgICB9DQoNCiAgICBpZiAodGhpcy5vcHRpb25zLnRvZ2dsZSkgdGhpcy50b2dn
bGUoKQ0KICB9DQoNCiAgQ29sbGFwc2UuVkVSU0lPTiAgPSAnMy4zLjcnDQoNCiAgQ29sbGFwc2Uu
VFJBTlNJVElPTl9EVVJBVElPTiA9IDM1MA0KDQogIENvbGxhcHNlLkRFRkFVTFRTID0gew0KICAg
IHRvZ2dsZTogdHJ1ZQ0KICB9DQoNCiAgQ29sbGFwc2UucHJvdG90eXBlLmRpbWVuc2lvbiA9IGZ1
bmN0aW9uICgpIHsNCiAgICB2YXIgaGFzV2lkdGggPSB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCd3
aWR0aCcpDQogICAgcmV0dXJuIGhhc1dpZHRoID8gJ3dpZHRoJyA6ICdoZWlnaHQnDQogIH0NCg0K
ICBDb2xsYXBzZS5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHsNCiAgICBpZiAodGhpcy50
cmFuc2l0aW9uaW5nIHx8IHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2luJykpIHJldHVybg0KDQog
ICAgdmFyIGFjdGl2ZXNEYXRhDQogICAgdmFyIGFjdGl2ZXMgPSB0aGlzLiRwYXJlbnQgJiYgdGhp
cy4kcGFyZW50LmNoaWxkcmVuKCcucGFuZWwnKS5jaGlsZHJlbignLmluLCAuY29sbGFwc2luZycp
DQoNCiAgICBpZiAoYWN0aXZlcyAmJiBhY3RpdmVzLmxlbmd0aCkgew0KICAgICAgYWN0aXZlc0Rh
dGEgPSBhY3RpdmVzLmRhdGEoJ2JzLmNvbGxhcHNlJykNCiAgICAgIGlmIChhY3RpdmVzRGF0YSAm
JiBhY3RpdmVzRGF0YS50cmFuc2l0aW9uaW5nKSByZXR1cm4NCiAgICB9DQoNCiAgICB2YXIgc3Rh
cnRFdmVudCA9ICQuRXZlbnQoJ3Nob3cuYnMuY29sbGFwc2UnKQ0KICAgIHRoaXMuJGVsZW1lbnQu
dHJpZ2dlcihzdGFydEV2ZW50KQ0KICAgIGlmIChzdGFydEV2ZW50LmlzRGVmYXVsdFByZXZlbnRl
ZCgpKSByZXR1cm4NCg0KICAgIGlmIChhY3RpdmVzICYmIGFjdGl2ZXMubGVuZ3RoKSB7DQogICAg
ICBQbHVnaW4uY2FsbChhY3RpdmVzLCAnaGlkZScpDQogICAgICBhY3RpdmVzRGF0YSB8fCBhY3Rp
dmVzLmRhdGEoJ2JzLmNvbGxhcHNlJywgbnVsbCkNCiAgICB9DQoNCiAgICB2YXIgZGltZW5zaW9u
ID0gdGhpcy5kaW1lbnNpb24oKQ0KDQogICAgdGhpcy4kZWxlbWVudA0KICAgICAgLnJlbW92ZUNs
YXNzKCdjb2xsYXBzZScpDQogICAgICAuYWRkQ2xhc3MoJ2NvbGxhcHNpbmcnKVtkaW1lbnNpb25d
KDApDQogICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsIHRydWUpDQoNCiAgICB0aGlzLiR0cmln
Z2VyDQogICAgICAucmVtb3ZlQ2xhc3MoJ2NvbGxhcHNlZCcpDQogICAgICAuYXR0cignYXJpYS1l
eHBhbmRlZCcsIHRydWUpDQoNCiAgICB0aGlzLnRyYW5zaXRpb25pbmcgPSAxDQoNCiAgICB2YXIg
Y29tcGxldGUgPSBmdW5jdGlvbiAoKSB7DQogICAgICB0aGlzLiRlbGVtZW50DQogICAgICAgIC5y
ZW1vdmVDbGFzcygnY29sbGFwc2luZycpDQogICAgICAgIC5hZGRDbGFzcygnY29sbGFwc2UgaW4n
KVtkaW1lbnNpb25dKCcnKQ0KICAgICAgdGhpcy50cmFuc2l0aW9uaW5nID0gMA0KICAgICAgdGhp
cy4kZWxlbWVudA0KICAgICAgICAudHJpZ2dlcignc2hvd24uYnMuY29sbGFwc2UnKQ0KICAgIH0N
Cg0KICAgIGlmICghJC5zdXBwb3J0LnRyYW5zaXRpb24pIHJldHVybiBjb21wbGV0ZS5jYWxsKHRo
aXMpDQoNCiAgICB2YXIgc2Nyb2xsU2l6ZSA9ICQuY2FtZWxDYXNlKFsnc2Nyb2xsJywgZGltZW5z
aW9uXS5qb2luKCctJykpDQoNCiAgICB0aGlzLiRlbGVtZW50DQogICAgICAub25lKCdic1RyYW5z
aXRpb25FbmQnLCAkLnByb3h5KGNvbXBsZXRlLCB0aGlzKSkNCiAgICAgIC5lbXVsYXRlVHJhbnNp
dGlvbkVuZChDb2xsYXBzZS5UUkFOU0lUSU9OX0RVUkFUSU9OKVtkaW1lbnNpb25dKHRoaXMuJGVs
ZW1lbnRbMF1bc2Nyb2xsU2l6ZV0pDQogIH0NCg0KICBDb2xsYXBzZS5wcm90b3R5cGUuaGlkZSA9
IGZ1bmN0aW9uICgpIHsNCiAgICBpZiAodGhpcy50cmFuc2l0aW9uaW5nIHx8ICF0aGlzLiRlbGVt
ZW50Lmhhc0NsYXNzKCdpbicpKSByZXR1cm4NCg0KICAgIHZhciBzdGFydEV2ZW50ID0gJC5FdmVu
dCgnaGlkZS5icy5jb2xsYXBzZScpDQogICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKHN0YXJ0RXZl
bnQpDQogICAgaWYgKHN0YXJ0RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVybg0KDQog
ICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZGltZW5zaW9uKCkNCg0KICAgIHRoaXMuJGVsZW1lbnRb
ZGltZW5zaW9uXSh0aGlzLiRlbGVtZW50W2RpbWVuc2lvbl0oKSlbMF0ub2Zmc2V0SGVpZ2h0DQoN
CiAgICB0aGlzLiRlbGVtZW50DQogICAgICAuYWRkQ2xhc3MoJ2NvbGxhcHNpbmcnKQ0KICAgICAg
LnJlbW92ZUNsYXNzKCdjb2xsYXBzZSBpbicpDQogICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcs
IGZhbHNlKQ0KDQogICAgdGhpcy4kdHJpZ2dlcg0KICAgICAgLmFkZENsYXNzKCdjb2xsYXBzZWQn
KQ0KICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSkNCg0KICAgIHRoaXMudHJhbnNp
dGlvbmluZyA9IDENCg0KICAgIHZhciBjb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIHRo
aXMudHJhbnNpdGlvbmluZyA9IDANCiAgICAgIHRoaXMuJGVsZW1lbnQNCiAgICAgICAgLnJlbW92
ZUNsYXNzKCdjb2xsYXBzaW5nJykNCiAgICAgICAgLmFkZENsYXNzKCdjb2xsYXBzZScpDQogICAg
ICAgIC50cmlnZ2VyKCdoaWRkZW4uYnMuY29sbGFwc2UnKQ0KICAgIH0NCg0KICAgIGlmICghJC5z
dXBwb3J0LnRyYW5zaXRpb24pIHJldHVybiBjb21wbGV0ZS5jYWxsKHRoaXMpDQoNCiAgICB0aGlz
LiRlbGVtZW50DQogICAgICBbZGltZW5zaW9uXSgwKQ0KICAgICAgLm9uZSgnYnNUcmFuc2l0aW9u
RW5kJywgJC5wcm94eShjb21wbGV0ZSwgdGhpcykpDQogICAgICAuZW11bGF0ZVRyYW5zaXRpb25F
bmQoQ29sbGFwc2UuVFJBTlNJVElPTl9EVVJBVElPTikNCiAgfQ0KDQogIENvbGxhcHNlLnByb3Rv
dHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoKSB7DQogICAgdGhpc1t0aGlzLiRlbGVtZW50Lmhhc0Ns
YXNzKCdpbicpID8gJ2hpZGUnIDogJ3Nob3cnXSgpDQogIH0NCg0KICBDb2xsYXBzZS5wcm90b3R5
cGUuZ2V0UGFyZW50ID0gZnVuY3Rpb24gKCkgew0KICAgIHJldHVybiAkKHRoaXMub3B0aW9ucy5w
YXJlbnQpDQogICAgICAuZmluZCgnW2RhdGEtdG9nZ2xlPSJjb2xsYXBzZSJdW2RhdGEtcGFyZW50
PSInICsgdGhpcy5vcHRpb25zLnBhcmVudCArICciXScpDQogICAgICAuZWFjaCgkLnByb3h5KGZ1
bmN0aW9uIChpLCBlbGVtZW50KSB7DQogICAgICAgIHZhciAkZWxlbWVudCA9ICQoZWxlbWVudCkN
CiAgICAgICAgdGhpcy5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MoZ2V0VGFyZ2V0RnJvbVRyaWdn
ZXIoJGVsZW1lbnQpLCAkZWxlbWVudCkNCiAgICAgIH0sIHRoaXMpKQ0KICAgICAgLmVuZCgpDQog
IH0NCg0KICBDb2xsYXBzZS5wcm90b3R5cGUuYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzID0gZnVu
Y3Rpb24gKCRlbGVtZW50LCAkdHJpZ2dlcikgew0KICAgIHZhciBpc09wZW4gPSAkZWxlbWVudC5o
YXNDbGFzcygnaW4nKQ0KDQogICAgJGVsZW1lbnQuYXR0cignYXJpYS1leHBhbmRlZCcsIGlzT3Bl
bikNCiAgICAkdHJpZ2dlcg0KICAgICAgLnRvZ2dsZUNsYXNzKCdjb2xsYXBzZWQnLCAhaXNPcGVu
KQ0KICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBpc09wZW4pDQogIH0NCg0KICBmdW5jdGlv
biBnZXRUYXJnZXRGcm9tVHJpZ2dlcigkdHJpZ2dlcikgew0KICAgIHZhciBocmVmDQogICAgdmFy
IHRhcmdldCA9ICR0cmlnZ2VyLmF0dHIoJ2RhdGEtdGFyZ2V0JykNCiAgICAgIHx8IChocmVmID0g
JHRyaWdnZXIuYXR0cignaHJlZicpKSAmJiBocmVmLnJlcGxhY2UoLy4qKD89I1teXHNdKyQpLywg
JycpIC8vIHN0cmlwIGZvciBpZTcNCg0KICAgIHJldHVybiAkKHRhcmdldCkNCiAgfQ0KDQoNCiAg
Ly8gQ09MTEFQU0UgUExVR0lOIERFRklOSVRJT04NCiAgLy8gPT09PT09PT09PT09PT09PT09PT09
PT09PT0NCg0KICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7DQogICAgcmV0dXJuIHRoaXMuZWFj
aChmdW5jdGlvbiAoKSB7DQogICAgICB2YXIgJHRoaXMgICA9ICQodGhpcykNCiAgICAgIHZhciBk
YXRhICAgID0gJHRoaXMuZGF0YSgnYnMuY29sbGFwc2UnKQ0KICAgICAgdmFyIG9wdGlvbnMgPSAk
LmV4dGVuZCh7fSwgQ29sbGFwc2UuREVGQVVMVFMsICR0aGlzLmRhdGEoKSwgdHlwZW9mIG9wdGlv
biA9PSAnb2JqZWN0JyAmJiBvcHRpb24pDQoNCiAgICAgIGlmICghZGF0YSAmJiBvcHRpb25zLnRv
Z2dsZSAmJiAvc2hvd3xoaWRlLy50ZXN0KG9wdGlvbikpIG9wdGlvbnMudG9nZ2xlID0gZmFsc2UN
CiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMuY29sbGFwc2UnLCAoZGF0YSA9IG5ldyBD
b2xsYXBzZSh0aGlzLCBvcHRpb25zKSkpDQogICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3Ry
aW5nJykgZGF0YVtvcHRpb25dKCkNCiAgICB9KQ0KICB9DQoNCiAgdmFyIG9sZCA9ICQuZm4uY29s
bGFwc2UNCg0KICAkLmZuLmNvbGxhcHNlICAgICAgICAgICAgID0gUGx1Z2luDQogICQuZm4uY29s
bGFwc2UuQ29uc3RydWN0b3IgPSBDb2xsYXBzZQ0KDQoNCiAgLy8gQ09MTEFQU0UgTk8gQ09ORkxJ
Q1QNCiAgLy8gPT09PT09PT09PT09PT09PT09PT0NCg0KICAkLmZuLmNvbGxhcHNlLm5vQ29uZmxp
Y3QgPSBmdW5jdGlvbiAoKSB7DQogICAgJC5mbi5jb2xsYXBzZSA9IG9sZA0KICAgIHJldHVybiB0
aGlzDQogIH0NCg0KDQogIC8vIENPTExBUFNFIERBVEEtQVBJDQogIC8vID09PT09PT09PT09PT09
PT09DQoNCiAgJChkb2N1bWVudCkub24oJ2NsaWNrLmJzLmNvbGxhcHNlLmRhdGEtYXBpJywgJ1tk
YXRhLXRvZ2dsZT0iY29sbGFwc2UiXScsIGZ1bmN0aW9uIChlKSB7DQogICAgdmFyICR0aGlzICAg
PSAkKHRoaXMpDQoNCiAgICBpZiAoISR0aGlzLmF0dHIoJ2RhdGEtdGFyZ2V0JykpIGUucHJldmVu
dERlZmF1bHQoKQ0KDQogICAgdmFyICR0YXJnZXQgPSBnZXRUYXJnZXRGcm9tVHJpZ2dlcigkdGhp
cykNCiAgICB2YXIgZGF0YSAgICA9ICR0YXJnZXQuZGF0YSgnYnMuY29sbGFwc2UnKQ0KICAgIHZh
ciBvcHRpb24gID0gZGF0YSA/ICd0b2dnbGUnIDogJHRoaXMuZGF0YSgpDQoNCiAgICBQbHVnaW4u
Y2FsbCgkdGFyZ2V0LCBvcHRpb24pDQogIH0pDQoNCn0oalF1ZXJ5KTsNCg0KLyogPT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09DQogKiBCb290c3RyYXA6IGRyb3Bkb3duLmpzIHYzLjMuNw0KICogaHR0cDovL2dldGJv
b3RzdHJhcC5jb20vamF2YXNjcmlwdC8jZHJvcGRvd25zDQogKiA9PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAq
IENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLg0KICogTGljZW5zZWQgdW5kZXIgTUlU
IChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSkN
CiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PSAqLw0KDQoNCitmdW5jdGlvbiAoJCkgew0KICAndXNlIHN0cmlj
dCc7DQoNCiAgLy8gRFJPUERPV04gQ0xBU1MgREVGSU5JVElPTg0KICAvLyA9PT09PT09PT09PT09
PT09PT09PT09PT09DQoNCiAgdmFyIGJhY2tkcm9wID0gJy5kcm9wZG93bi1iYWNrZHJvcCcNCiAg
dmFyIHRvZ2dsZSAgID0gJ1tkYXRhLXRvZ2dsZT0iZHJvcGRvd24iXScNCiAgdmFyIERyb3Bkb3du
ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHsNCiAgICAkKGVsZW1lbnQpLm9uKCdjbGljay5icy5kcm9w
ZG93bicsIHRoaXMudG9nZ2xlKQ0KICB9DQoNCiAgRHJvcGRvd24uVkVSU0lPTiA9ICczLjMuNycN
Cg0KICBmdW5jdGlvbiBnZXRQYXJlbnQoJHRoaXMpIHsNCiAgICB2YXIgc2VsZWN0b3IgPSAkdGhp
cy5hdHRyKCdkYXRhLXRhcmdldCcpDQoNCiAgICBpZiAoIXNlbGVjdG9yKSB7DQogICAgICBzZWxl
Y3RvciA9ICR0aGlzLmF0dHIoJ2hyZWYnKQ0KICAgICAgc2VsZWN0b3IgPSBzZWxlY3RvciAmJiAv
I1tBLVphLXpdLy50ZXN0KHNlbGVjdG9yKSAmJiBzZWxlY3Rvci5yZXBsYWNlKC8uKig/PSNbXlxz
XSokKS8sICcnKSAvLyBzdHJpcCBmb3IgaWU3DQogICAgfQ0KDQogICAgdmFyICRwYXJlbnQgPSBz
ZWxlY3RvciAmJiAkKHNlbGVjdG9yKQ0KDQogICAgcmV0dXJuICRwYXJlbnQgJiYgJHBhcmVudC5s
ZW5ndGggPyAkcGFyZW50IDogJHRoaXMucGFyZW50KCkNCiAgfQ0KDQogIGZ1bmN0aW9uIGNsZWFy
TWVudXMoZSkgew0KICAgIGlmIChlICYmIGUud2hpY2ggPT09IDMpIHJldHVybg0KICAgICQoYmFj
a2Ryb3ApLnJlbW92ZSgpDQogICAgJCh0b2dnbGUpLmVhY2goZnVuY3Rpb24gKCkgew0KICAgICAg
dmFyICR0aGlzICAgICAgICAgPSAkKHRoaXMpDQogICAgICB2YXIgJHBhcmVudCAgICAgICA9IGdl
dFBhcmVudCgkdGhpcykNCiAgICAgIHZhciByZWxhdGVkVGFyZ2V0ID0geyByZWxhdGVkVGFyZ2V0
OiB0aGlzIH0NCg0KICAgICAgaWYgKCEkcGFyZW50Lmhhc0NsYXNzKCdvcGVuJykpIHJldHVybg0K
DQogICAgICBpZiAoZSAmJiBlLnR5cGUgPT0gJ2NsaWNrJyAmJiAvaW5wdXR8dGV4dGFyZWEvaS50
ZXN0KGUudGFyZ2V0LnRhZ05hbWUpICYmICQuY29udGFpbnMoJHBhcmVudFswXSwgZS50YXJnZXQp
KSByZXR1cm4NCg0KICAgICAgJHBhcmVudC50cmlnZ2VyKGUgPSAkLkV2ZW50KCdoaWRlLmJzLmRy
b3Bkb3duJywgcmVsYXRlZFRhcmdldCkpDQoNCiAgICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRl
ZCgpKSByZXR1cm4NCg0KICAgICAgJHRoaXMuYXR0cignYXJpYS1leHBhbmRlZCcsICdmYWxzZScp
DQogICAgICAkcGFyZW50LnJlbW92ZUNsYXNzKCdvcGVuJykudHJpZ2dlcigkLkV2ZW50KCdoaWRk
ZW4uYnMuZHJvcGRvd24nLCByZWxhdGVkVGFyZ2V0KSkNCiAgICB9KQ0KICB9DQoNCiAgRHJvcGRv
d24ucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uIChlKSB7DQogICAgdmFyICR0aGlzID0gJCh0
aGlzKQ0KDQogICAgaWYgKCR0aGlzLmlzKCcuZGlzYWJsZWQsIDpkaXNhYmxlZCcpKSByZXR1cm4N
Cg0KICAgIHZhciAkcGFyZW50ICA9IGdldFBhcmVudCgkdGhpcykNCiAgICB2YXIgaXNBY3RpdmUg
PSAkcGFyZW50Lmhhc0NsYXNzKCdvcGVuJykNCg0KICAgIGNsZWFyTWVudXMoKQ0KDQogICAgaWYg
KCFpc0FjdGl2ZSkgew0KICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3Vt
ZW50RWxlbWVudCAmJiAhJHBhcmVudC5jbG9zZXN0KCcubmF2YmFyLW5hdicpLmxlbmd0aCkgew0K
ICAgICAgICAvLyBpZiBtb2JpbGUgd2UgdXNlIGEgYmFja2Ryb3AgYmVjYXVzZSBjbGljayBldmVu
dHMgZG9uJ3QgZGVsZWdhdGUNCiAgICAgICAgJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYn
KSkNCiAgICAgICAgICAuYWRkQ2xhc3MoJ2Ryb3Bkb3duLWJhY2tkcm9wJykNCiAgICAgICAgICAu
aW5zZXJ0QWZ0ZXIoJCh0aGlzKSkNCiAgICAgICAgICAub24oJ2NsaWNrJywgY2xlYXJNZW51cykN
CiAgICAgIH0NCg0KICAgICAgdmFyIHJlbGF0ZWRUYXJnZXQgPSB7IHJlbGF0ZWRUYXJnZXQ6IHRo
aXMgfQ0KICAgICAgJHBhcmVudC50cmlnZ2VyKGUgPSAkLkV2ZW50KCdzaG93LmJzLmRyb3Bkb3du
JywgcmVsYXRlZFRhcmdldCkpDQoNCiAgICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSBy
ZXR1cm4NCg0KICAgICAgJHRoaXMNCiAgICAgICAgLnRyaWdnZXIoJ2ZvY3VzJykNCiAgICAgICAg
LmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpDQoNCiAgICAgICRwYXJlbnQNCiAgICAgICAg
LnRvZ2dsZUNsYXNzKCdvcGVuJykNCiAgICAgICAgLnRyaWdnZXIoJC5FdmVudCgnc2hvd24uYnMu
ZHJvcGRvd24nLCByZWxhdGVkVGFyZ2V0KSkNCiAgICB9DQoNCiAgICByZXR1cm4gZmFsc2UNCiAg
fQ0KDQogIERyb3Bkb3duLnByb3RvdHlwZS5rZXlkb3duID0gZnVuY3Rpb24gKGUpIHsNCiAgICBp
ZiAoIS8oMzh8NDB8Mjd8MzIpLy50ZXN0KGUud2hpY2gpIHx8IC9pbnB1dHx0ZXh0YXJlYS9pLnRl
c3QoZS50YXJnZXQudGFnTmFtZSkpIHJldHVybg0KDQogICAgdmFyICR0aGlzID0gJCh0aGlzKQ0K
DQogICAgZS5wcmV2ZW50RGVmYXVsdCgpDQogICAgZS5zdG9wUHJvcGFnYXRpb24oKQ0KDQogICAg
aWYgKCR0aGlzLmlzKCcuZGlzYWJsZWQsIDpkaXNhYmxlZCcpKSByZXR1cm4NCg0KICAgIHZhciAk
cGFyZW50ICA9IGdldFBhcmVudCgkdGhpcykNCiAgICB2YXIgaXNBY3RpdmUgPSAkcGFyZW50Lmhh
c0NsYXNzKCdvcGVuJykNCg0KICAgIGlmICghaXNBY3RpdmUgJiYgZS53aGljaCAhPSAyNyB8fCBp
c0FjdGl2ZSAmJiBlLndoaWNoID09IDI3KSB7DQogICAgICBpZiAoZS53aGljaCA9PSAyNykgJHBh
cmVudC5maW5kKHRvZ2dsZSkudHJpZ2dlcignZm9jdXMnKQ0KICAgICAgcmV0dXJuICR0aGlzLnRy
aWdnZXIoJ2NsaWNrJykNCiAgICB9DQoNCiAgICB2YXIgZGVzYyA9ICcgbGk6bm90KC5kaXNhYmxl
ZCk6dmlzaWJsZSBhJw0KICAgIHZhciAkaXRlbXMgPSAkcGFyZW50LmZpbmQoJy5kcm9wZG93bi1t
ZW51JyArIGRlc2MpDQoNCiAgICBpZiAoISRpdGVtcy5sZW5ndGgpIHJldHVybg0KDQogICAgdmFy
IGluZGV4ID0gJGl0ZW1zLmluZGV4KGUudGFyZ2V0KQ0KDQogICAgaWYgKGUud2hpY2ggPT0gMzgg
JiYgaW5kZXggPiAwKSAgICAgICAgICAgICAgICAgaW5kZXgtLSAgICAgICAgIC8vIHVwDQogICAg
aWYgKGUud2hpY2ggPT0gNDAgJiYgaW5kZXggPCAkaXRlbXMubGVuZ3RoIC0gMSkgaW5kZXgrKyAg
ICAgICAgIC8vIGRvd24NCiAgICBpZiAoIX5pbmRleCkgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBpbmRleCA9IDANCg0KICAgICRpdGVtcy5lcShpbmRleCkudHJpZ2dlcignZm9j
dXMnKQ0KICB9DQoNCg0KICAvLyBEUk9QRE9XTiBQTFVHSU4gREVGSU5JVElPTg0KICAvLyA9PT09
PT09PT09PT09PT09PT09PT09PT09PQ0KDQogIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHsNCiAg
ICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciAkdGhpcyA9ICQodGhp
cykNCiAgICAgIHZhciBkYXRhICA9ICR0aGlzLmRhdGEoJ2JzLmRyb3Bkb3duJykNCg0KICAgICAg
aWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy5kcm9wZG93bicsIChkYXRhID0gbmV3IERyb3Bkb3du
KHRoaXMpKSkNCiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlv
bl0uY2FsbCgkdGhpcykNCiAgICB9KQ0KICB9DQoNCiAgdmFyIG9sZCA9ICQuZm4uZHJvcGRvd24N
Cg0KICAkLmZuLmRyb3Bkb3duICAgICAgICAgICAgID0gUGx1Z2luDQogICQuZm4uZHJvcGRvd24u
Q29uc3RydWN0b3IgPSBEcm9wZG93bg0KDQoNCiAgLy8gRFJPUERPV04gTk8gQ09ORkxJQ1QNCiAg
Ly8gPT09PT09PT09PT09PT09PT09PT0NCg0KICAkLmZuLmRyb3Bkb3duLm5vQ29uZmxpY3QgPSBm
dW5jdGlvbiAoKSB7DQogICAgJC5mbi5kcm9wZG93biA9IG9sZA0KICAgIHJldHVybiB0aGlzDQog
IH0NCg0KDQogIC8vIEFQUExZIFRPIFNUQU5EQVJEIERST1BET1dOIEVMRU1FTlRTDQogIC8vID09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoNCiAgJChkb2N1bWVudCkNCiAgICAu
b24oJ2NsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpJywgY2xlYXJNZW51cykNCiAgICAub24oJ2Ns
aWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpJywgJy5kcm9wZG93biBmb3JtJywgZnVuY3Rpb24gKGUp
IHsgZS5zdG9wUHJvcGFnYXRpb24oKSB9KQ0KICAgIC5vbignY2xpY2suYnMuZHJvcGRvd24uZGF0
YS1hcGknLCB0b2dnbGUsIERyb3Bkb3duLnByb3RvdHlwZS50b2dnbGUpDQogICAgLm9uKCdrZXlk
b3duLmJzLmRyb3Bkb3duLmRhdGEtYXBpJywgdG9nZ2xlLCBEcm9wZG93bi5wcm90b3R5cGUua2V5
ZG93bikNCiAgICAub24oJ2tleWRvd24uYnMuZHJvcGRvd24uZGF0YS1hcGknLCAnLmRyb3Bkb3du
LW1lbnUnLCBEcm9wZG93bi5wcm90b3R5cGUua2V5ZG93bikNCg0KfShqUXVlcnkpOw0KDQovKiA9
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT0NCiAqIEJvb3RzdHJhcDogbW9kYWwuanMgdjMuMy43DQogKiBodHRwOi8v
Z2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNtb2RhbHMNCiAqID09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0K
ICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuDQogKiBMaWNlbnNlZCB1bmRlciBN
SVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNF
KQ0KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09ICovDQoNCg0KK2Z1bmN0aW9uICgkKSB7DQogICd1c2Ugc3Ry
aWN0JzsNCg0KICAvLyBNT0RBTCBDTEFTUyBERUZJTklUSU9ODQogIC8vID09PT09PT09PT09PT09
PT09PT09PT0NCg0KICB2YXIgTW9kYWwgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykgew0K
ICAgIHRoaXMub3B0aW9ucyAgICAgICAgICAgICA9IG9wdGlvbnMNCiAgICB0aGlzLiRib2R5ICAg
ICAgICAgICAgICAgPSAkKGRvY3VtZW50LmJvZHkpDQogICAgdGhpcy4kZWxlbWVudCAgICAgICAg
ICAgID0gJChlbGVtZW50KQ0KICAgIHRoaXMuJGRpYWxvZyAgICAgICAgICAgICA9IHRoaXMuJGVs
ZW1lbnQuZmluZCgnLm1vZGFsLWRpYWxvZycpDQogICAgdGhpcy4kYmFja2Ryb3AgICAgICAgICAg
ID0gbnVsbA0KICAgIHRoaXMuaXNTaG93biAgICAgICAgICAgICA9IG51bGwNCiAgICB0aGlzLm9y
aWdpbmFsQm9keVBhZCAgICAgPSBudWxsDQogICAgdGhpcy5zY3JvbGxiYXJXaWR0aCAgICAgID0g
MA0KICAgIHRoaXMuaWdub3JlQmFja2Ryb3BDbGljayA9IGZhbHNlDQoNCiAgICBpZiAodGhpcy5v
cHRpb25zLnJlbW90ZSkgew0KICAgICAgdGhpcy4kZWxlbWVudA0KICAgICAgICAuZmluZCgnLm1v
ZGFsLWNvbnRlbnQnKQ0KICAgICAgICAubG9hZCh0aGlzLm9wdGlvbnMucmVtb3RlLCAkLnByb3h5
KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ2xvYWRlZC5i
cy5tb2RhbCcpDQogICAgICAgIH0sIHRoaXMpKQ0KICAgIH0NCiAgfQ0KDQogIE1vZGFsLlZFUlNJ
T04gID0gJzMuMy43Jw0KDQogIE1vZGFsLlRSQU5TSVRJT05fRFVSQVRJT04gPSAzMDANCiAgTW9k
YWwuQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTiA9IDE1MA0KDQogIE1vZGFsLkRFRkFVTFRT
ID0gew0KICAgIGJhY2tkcm9wOiB0cnVlLA0KICAgIGtleWJvYXJkOiB0cnVlLA0KICAgIHNob3c6
IHRydWUNCiAgfQ0KDQogIE1vZGFsLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoX3JlbGF0
ZWRUYXJnZXQpIHsNCiAgICByZXR1cm4gdGhpcy5pc1Nob3duID8gdGhpcy5oaWRlKCkgOiB0aGlz
LnNob3coX3JlbGF0ZWRUYXJnZXQpDQogIH0NCg0KICBNb2RhbC5wcm90b3R5cGUuc2hvdyA9IGZ1
bmN0aW9uIChfcmVsYXRlZFRhcmdldCkgew0KICAgIHZhciB0aGF0ID0gdGhpcw0KICAgIHZhciBl
ICAgID0gJC5FdmVudCgnc2hvdy5icy5tb2RhbCcsIHsgcmVsYXRlZFRhcmdldDogX3JlbGF0ZWRU
YXJnZXQgfSkNCg0KICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihlKQ0KDQogICAgaWYgKHRoaXMu
aXNTaG93biB8fCBlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm4NCg0KICAgIHRoaXMuaXNT
aG93biA9IHRydWUNCg0KICAgIHRoaXMuY2hlY2tTY3JvbGxiYXIoKQ0KICAgIHRoaXMuc2V0U2Ny
b2xsYmFyKCkNCiAgICB0aGlzLiRib2R5LmFkZENsYXNzKCdtb2RhbC1vcGVuJykNCg0KICAgIHRo
aXMuZXNjYXBlKCkNCiAgICB0aGlzLnJlc2l6ZSgpDQoNCiAgICB0aGlzLiRlbGVtZW50Lm9uKCdj
bGljay5kaXNtaXNzLmJzLm1vZGFsJywgJ1tkYXRhLWRpc21pc3M9Im1vZGFsIl0nLCAkLnByb3h5
KHRoaXMuaGlkZSwgdGhpcykpDQoNCiAgICB0aGlzLiRkaWFsb2cub24oJ21vdXNlZG93bi5kaXNt
aXNzLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkgew0KICAgICAgdGhhdC4kZWxlbWVudC5vbmUoJ21v
dXNldXAuZGlzbWlzcy5icy5tb2RhbCcsIGZ1bmN0aW9uIChlKSB7DQogICAgICAgIGlmICgkKGUu
dGFyZ2V0KS5pcyh0aGF0LiRlbGVtZW50KSkgdGhhdC5pZ25vcmVCYWNrZHJvcENsaWNrID0gdHJ1
ZQ0KICAgICAgfSkNCiAgICB9KQ0KDQogICAgdGhpcy5iYWNrZHJvcChmdW5jdGlvbiAoKSB7DQog
ICAgICB2YXIgdHJhbnNpdGlvbiA9ICQuc3VwcG9ydC50cmFuc2l0aW9uICYmIHRoYXQuJGVsZW1l
bnQuaGFzQ2xhc3MoJ2ZhZGUnKQ0KDQogICAgICBpZiAoIXRoYXQuJGVsZW1lbnQucGFyZW50KCku
bGVuZ3RoKSB7DQogICAgICAgIHRoYXQuJGVsZW1lbnQuYXBwZW5kVG8odGhhdC4kYm9keSkgLy8g
ZG9uJ3QgbW92ZSBtb2RhbHMgZG9tIHBvc2l0aW9uDQogICAgICB9DQoNCiAgICAgIHRoYXQuJGVs
ZW1lbnQNCiAgICAgICAgLnNob3coKQ0KICAgICAgICAuc2Nyb2xsVG9wKDApDQoNCiAgICAgIHRo
YXQuYWRqdXN0RGlhbG9nKCkNCg0KICAgICAgaWYgKHRyYW5zaXRpb24pIHsNCiAgICAgICAgdGhh
dC4kZWxlbWVudFswXS5vZmZzZXRXaWR0aCAvLyBmb3JjZSByZWZsb3cNCiAgICAgIH0NCg0KICAg
ICAgdGhhdC4kZWxlbWVudC5hZGRDbGFzcygnaW4nKQ0KDQogICAgICB0aGF0LmVuZm9yY2VGb2N1
cygpDQoNCiAgICAgIHZhciBlID0gJC5FdmVudCgnc2hvd24uYnMubW9kYWwnLCB7IHJlbGF0ZWRU
YXJnZXQ6IF9yZWxhdGVkVGFyZ2V0IH0pDQoNCiAgICAgIHRyYW5zaXRpb24gPw0KICAgICAgICB0
aGF0LiRkaWFsb2cgLy8gd2FpdCBmb3IgbW9kYWwgdG8gc2xpZGUgaW4NCiAgICAgICAgICAub25l
KCdic1RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB0aGF0LiRlbGVt
ZW50LnRyaWdnZXIoJ2ZvY3VzJykudHJpZ2dlcihlKQ0KICAgICAgICAgIH0pDQogICAgICAgICAg
LmVtdWxhdGVUcmFuc2l0aW9uRW5kKE1vZGFsLlRSQU5TSVRJT05fRFVSQVRJT04pIDoNCiAgICAg
ICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKCdmb2N1cycpLnRyaWdnZXIoZSkNCiAgICB9KQ0KICB9
DQoNCiAgTW9kYWwucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbiAoZSkgew0KICAgIGlmIChlKSBl
LnByZXZlbnREZWZhdWx0KCkNCg0KICAgIGUgPSAkLkV2ZW50KCdoaWRlLmJzLm1vZGFsJykNCg0K
ICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihlKQ0KDQogICAgaWYgKCF0aGlzLmlzU2hvd24gfHwg
ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuDQoNCiAgICB0aGlzLmlzU2hvd24gPSBmYWxz
ZQ0KDQogICAgdGhpcy5lc2NhcGUoKQ0KICAgIHRoaXMucmVzaXplKCkNCg0KICAgICQoZG9jdW1l
bnQpLm9mZignZm9jdXNpbi5icy5tb2RhbCcpDQoNCiAgICB0aGlzLiRlbGVtZW50DQogICAgICAu
cmVtb3ZlQ2xhc3MoJ2luJykNCiAgICAgIC5vZmYoJ2NsaWNrLmRpc21pc3MuYnMubW9kYWwnKQ0K
ICAgICAgLm9mZignbW91c2V1cC5kaXNtaXNzLmJzLm1vZGFsJykNCg0KICAgIHRoaXMuJGRpYWxv
Zy5vZmYoJ21vdXNlZG93bi5kaXNtaXNzLmJzLm1vZGFsJykNCg0KICAgICQuc3VwcG9ydC50cmFu
c2l0aW9uICYmIHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2ZhZGUnKSA/DQogICAgICB0aGlzLiRl
bGVtZW50DQogICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsICQucHJveHkodGhpcy5oaWRl
TW9kYWwsIHRoaXMpKQ0KICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoTW9kYWwuVFJBTlNJ
VElPTl9EVVJBVElPTikgOg0KICAgICAgdGhpcy5oaWRlTW9kYWwoKQ0KICB9DQoNCiAgTW9kYWwu
cHJvdG90eXBlLmVuZm9yY2VGb2N1cyA9IGZ1bmN0aW9uICgpIHsNCiAgICAkKGRvY3VtZW50KQ0K
ICAgICAgLm9mZignZm9jdXNpbi5icy5tb2RhbCcpIC8vIGd1YXJkIGFnYWluc3QgaW5maW5pdGUg
Zm9jdXMgbG9vcA0KICAgICAgLm9uKCdmb2N1c2luLmJzLm1vZGFsJywgJC5wcm94eShmdW5jdGlv
biAoZSkgew0KICAgICAgICBpZiAoZG9jdW1lbnQgIT09IGUudGFyZ2V0ICYmDQogICAgICAgICAg
ICB0aGlzLiRlbGVtZW50WzBdICE9PSBlLnRhcmdldCAmJg0KICAgICAgICAgICAgIXRoaXMuJGVs
ZW1lbnQuaGFzKGUudGFyZ2V0KS5sZW5ndGgpIHsNCiAgICAgICAgICB0aGlzLiRlbGVtZW50LnRy
aWdnZXIoJ2ZvY3VzJykNCiAgICAgICAgfQ0KICAgICAgfSwgdGhpcykpDQogIH0NCg0KICBNb2Rh
bC5wcm90b3R5cGUuZXNjYXBlID0gZnVuY3Rpb24gKCkgew0KICAgIGlmICh0aGlzLmlzU2hvd24g
JiYgdGhpcy5vcHRpb25zLmtleWJvYXJkKSB7DQogICAgICB0aGlzLiRlbGVtZW50Lm9uKCdrZXlk
b3duLmRpc21pc3MuYnMubW9kYWwnLCAkLnByb3h5KGZ1bmN0aW9uIChlKSB7DQogICAgICAgIGUu
d2hpY2ggPT0gMjcgJiYgdGhpcy5oaWRlKCkNCiAgICAgIH0sIHRoaXMpKQ0KICAgIH0gZWxzZSBp
ZiAoIXRoaXMuaXNTaG93bikgew0KICAgICAgdGhpcy4kZWxlbWVudC5vZmYoJ2tleWRvd24uZGlz
bWlzcy5icy5tb2RhbCcpDQogICAgfQ0KICB9DQoNCiAgTW9kYWwucHJvdG90eXBlLnJlc2l6ZSA9
IGZ1bmN0aW9uICgpIHsNCiAgICBpZiAodGhpcy5pc1Nob3duKSB7DQogICAgICAkKHdpbmRvdyku
b24oJ3Jlc2l6ZS5icy5tb2RhbCcsICQucHJveHkodGhpcy5oYW5kbGVVcGRhdGUsIHRoaXMpKQ0K
ICAgIH0gZWxzZSB7DQogICAgICAkKHdpbmRvdykub2ZmKCdyZXNpemUuYnMubW9kYWwnKQ0KICAg
IH0NCiAgfQ0KDQogIE1vZGFsLnByb3RvdHlwZS5oaWRlTW9kYWwgPSBmdW5jdGlvbiAoKSB7DQog
ICAgdmFyIHRoYXQgPSB0aGlzDQogICAgdGhpcy4kZWxlbWVudC5oaWRlKCkNCiAgICB0aGlzLmJh
Y2tkcm9wKGZ1bmN0aW9uICgpIHsNCiAgICAgIHRoYXQuJGJvZHkucmVtb3ZlQ2xhc3MoJ21vZGFs
LW9wZW4nKQ0KICAgICAgdGhhdC5yZXNldEFkanVzdG1lbnRzKCkNCiAgICAgIHRoYXQucmVzZXRT
Y3JvbGxiYXIoKQ0KICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKCdoaWRkZW4uYnMubW9kYWwn
KQ0KICAgIH0pDQogIH0NCg0KICBNb2RhbC5wcm90b3R5cGUucmVtb3ZlQmFja2Ryb3AgPSBmdW5j
dGlvbiAoKSB7DQogICAgdGhpcy4kYmFja2Ryb3AgJiYgdGhpcy4kYmFja2Ryb3AucmVtb3ZlKCkN
CiAgICB0aGlzLiRiYWNrZHJvcCA9IG51bGwNCiAgfQ0KDQogIE1vZGFsLnByb3RvdHlwZS5iYWNr
ZHJvcCA9IGZ1bmN0aW9uIChjYWxsYmFjaykgew0KICAgIHZhciB0aGF0ID0gdGhpcw0KICAgIHZh
ciBhbmltYXRlID0gdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnZmFkZScpID8gJ2ZhZGUnIDogJycN
Cg0KICAgIGlmICh0aGlzLmlzU2hvd24gJiYgdGhpcy5vcHRpb25zLmJhY2tkcm9wKSB7DQogICAg
ICB2YXIgZG9BbmltYXRlID0gJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgYW5pbWF0ZQ0KDQogICAg
ICB0aGlzLiRiYWNrZHJvcCA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpDQogICAg
ICAgIC5hZGRDbGFzcygnbW9kYWwtYmFja2Ryb3AgJyArIGFuaW1hdGUpDQogICAgICAgIC5hcHBl
bmRUbyh0aGlzLiRib2R5KQ0KDQogICAgICB0aGlzLiRlbGVtZW50Lm9uKCdjbGljay5kaXNtaXNz
LmJzLm1vZGFsJywgJC5wcm94eShmdW5jdGlvbiAoZSkgew0KICAgICAgICBpZiAodGhpcy5pZ25v
cmVCYWNrZHJvcENsaWNrKSB7DQogICAgICAgICAgdGhpcy5pZ25vcmVCYWNrZHJvcENsaWNrID0g
ZmFsc2UNCiAgICAgICAgICByZXR1cm4NCiAgICAgICAgfQ0KICAgICAgICBpZiAoZS50YXJnZXQg
IT09IGUuY3VycmVudFRhcmdldCkgcmV0dXJuDQogICAgICAgIHRoaXMub3B0aW9ucy5iYWNrZHJv
cCA9PSAnc3RhdGljJw0KICAgICAgICAgID8gdGhpcy4kZWxlbWVudFswXS5mb2N1cygpDQogICAg
ICAgICAgOiB0aGlzLmhpZGUoKQ0KICAgICAgfSwgdGhpcykpDQoNCiAgICAgIGlmIChkb0FuaW1h
dGUpIHRoaXMuJGJhY2tkcm9wWzBdLm9mZnNldFdpZHRoIC8vIGZvcmNlIHJlZmxvdw0KDQogICAg
ICB0aGlzLiRiYWNrZHJvcC5hZGRDbGFzcygnaW4nKQ0KDQogICAgICBpZiAoIWNhbGxiYWNrKSBy
ZXR1cm4NCg0KICAgICAgZG9BbmltYXRlID8NCiAgICAgICAgdGhpcy4kYmFja2Ryb3ANCiAgICAg
ICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCBjYWxsYmFjaykNCiAgICAgICAgICAuZW11bGF0
ZVRyYW5zaXRpb25FbmQoTW9kYWwuQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTikgOg0KICAg
ICAgICBjYWxsYmFjaygpDQoNCiAgICB9IGVsc2UgaWYgKCF0aGlzLmlzU2hvd24gJiYgdGhpcy4k
YmFja2Ryb3ApIHsNCiAgICAgIHRoaXMuJGJhY2tkcm9wLnJlbW92ZUNsYXNzKCdpbicpDQoNCiAg
ICAgIHZhciBjYWxsYmFja1JlbW92ZSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdGhhdC5yZW1v
dmVCYWNrZHJvcCgpDQogICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCkNCiAgICAgIH0NCiAg
ICAgICQuc3VwcG9ydC50cmFuc2l0aW9uICYmIHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2ZhZGUn
KSA/DQogICAgICAgIHRoaXMuJGJhY2tkcm9wDQogICAgICAgICAgLm9uZSgnYnNUcmFuc2l0aW9u
RW5kJywgY2FsbGJhY2tSZW1vdmUpDQogICAgICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKE1v
ZGFsLkJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT04pIDoNCiAgICAgICAgY2FsbGJhY2tSZW1v
dmUoKQ0KDQogICAgfSBlbHNlIGlmIChjYWxsYmFjaykgew0KICAgICAgY2FsbGJhY2soKQ0KICAg
IH0NCiAgfQ0KDQogIC8vIHRoZXNlIGZvbGxvd2luZyBtZXRob2RzIGFyZSB1c2VkIHRvIGhhbmRs
ZSBvdmVyZmxvd2luZyBtb2RhbHMNCg0KICBNb2RhbC5wcm90b3R5cGUuaGFuZGxlVXBkYXRlID0g
ZnVuY3Rpb24gKCkgew0KICAgIHRoaXMuYWRqdXN0RGlhbG9nKCkNCiAgfQ0KDQogIE1vZGFsLnBy
b3RvdHlwZS5hZGp1c3REaWFsb2cgPSBmdW5jdGlvbiAoKSB7DQogICAgdmFyIG1vZGFsSXNPdmVy
Zmxvd2luZyA9IHRoaXMuJGVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0ID4gZG9jdW1lbnQuZG9jdW1l
bnRFbGVtZW50LmNsaWVudEhlaWdodA0KDQogICAgdGhpcy4kZWxlbWVudC5jc3Moew0KICAgICAg
cGFkZGluZ0xlZnQ6ICAhdGhpcy5ib2R5SXNPdmVyZmxvd2luZyAmJiBtb2RhbElzT3ZlcmZsb3dp
bmcgPyB0aGlzLnNjcm9sbGJhcldpZHRoIDogJycsDQogICAgICBwYWRkaW5nUmlnaHQ6IHRoaXMu
Ym9keUlzT3ZlcmZsb3dpbmcgJiYgIW1vZGFsSXNPdmVyZmxvd2luZyA/IHRoaXMuc2Nyb2xsYmFy
V2lkdGggOiAnJw0KICAgIH0pDQogIH0NCg0KICBNb2RhbC5wcm90b3R5cGUucmVzZXRBZGp1c3Rt
ZW50cyA9IGZ1bmN0aW9uICgpIHsNCiAgICB0aGlzLiRlbGVtZW50LmNzcyh7DQogICAgICBwYWRk
aW5nTGVmdDogJycsDQogICAgICBwYWRkaW5nUmlnaHQ6ICcnDQogICAgfSkNCiAgfQ0KDQogIE1v
ZGFsLnByb3RvdHlwZS5jaGVja1Njcm9sbGJhciA9IGZ1bmN0aW9uICgpIHsNCiAgICB2YXIgZnVs
bFdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGgNCiAgICBpZiAoIWZ1bGxXaW5kb3dXaWR0
aCkgeyAvLyB3b3JrYXJvdW5kIGZvciBtaXNzaW5nIHdpbmRvdy5pbm5lcldpZHRoIGluIElFOA0K
ICAgICAgdmFyIGRvY3VtZW50RWxlbWVudFJlY3QgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQu
Z2V0Qm91bmRpbmdDbGllbnRSZWN0KCkNCiAgICAgIGZ1bGxXaW5kb3dXaWR0aCA9IGRvY3VtZW50
RWxlbWVudFJlY3QucmlnaHQgLSBNYXRoLmFicyhkb2N1bWVudEVsZW1lbnRSZWN0LmxlZnQpDQog
ICAgfQ0KICAgIHRoaXMuYm9keUlzT3ZlcmZsb3dpbmcgPSBkb2N1bWVudC5ib2R5LmNsaWVudFdp
ZHRoIDwgZnVsbFdpbmRvd1dpZHRoDQogICAgdGhpcy5zY3JvbGxiYXJXaWR0aCA9IHRoaXMubWVh
c3VyZVNjcm9sbGJhcigpDQogIH0NCg0KICBNb2RhbC5wcm90b3R5cGUuc2V0U2Nyb2xsYmFyID0g
ZnVuY3Rpb24gKCkgew0KICAgIHZhciBib2R5UGFkID0gcGFyc2VJbnQoKHRoaXMuJGJvZHkuY3Nz
KCdwYWRkaW5nLXJpZ2h0JykgfHwgMCksIDEwKQ0KICAgIHRoaXMub3JpZ2luYWxCb2R5UGFkID0g
ZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nUmlnaHQgfHwgJycNCiAgICBpZiAodGhpcy5ib2R5
SXNPdmVyZmxvd2luZykgdGhpcy4kYm9keS5jc3MoJ3BhZGRpbmctcmlnaHQnLCBib2R5UGFkICsg
dGhpcy5zY3JvbGxiYXJXaWR0aCkNCiAgfQ0KDQogIE1vZGFsLnByb3RvdHlwZS5yZXNldFNjcm9s
bGJhciA9IGZ1bmN0aW9uICgpIHsNCiAgICB0aGlzLiRib2R5LmNzcygncGFkZGluZy1yaWdodCcs
IHRoaXMub3JpZ2luYWxCb2R5UGFkKQ0KICB9DQoNCiAgTW9kYWwucHJvdG90eXBlLm1lYXN1cmVT
Y3JvbGxiYXIgPSBmdW5jdGlvbiAoKSB7IC8vIHRoeCB3YWxzaA0KICAgIHZhciBzY3JvbGxEaXYg
PSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKQ0KICAgIHNjcm9sbERpdi5jbGFzc05hbWUg
PSAnbW9kYWwtc2Nyb2xsYmFyLW1lYXN1cmUnDQogICAgdGhpcy4kYm9keS5hcHBlbmQoc2Nyb2xs
RGl2KQ0KICAgIHZhciBzY3JvbGxiYXJXaWR0aCA9IHNjcm9sbERpdi5vZmZzZXRXaWR0aCAtIHNj
cm9sbERpdi5jbGllbnRXaWR0aA0KICAgIHRoaXMuJGJvZHlbMF0ucmVtb3ZlQ2hpbGQoc2Nyb2xs
RGl2KQ0KICAgIHJldHVybiBzY3JvbGxiYXJXaWR0aA0KICB9DQoNCg0KICAvLyBNT0RBTCBQTFVH
SU4gREVGSU5JVElPTg0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PQ0KDQogIGZ1bmN0aW9u
IFBsdWdpbihvcHRpb24sIF9yZWxhdGVkVGFyZ2V0KSB7DQogICAgcmV0dXJuIHRoaXMuZWFjaChm
dW5jdGlvbiAoKSB7DQogICAgICB2YXIgJHRoaXMgICA9ICQodGhpcykNCiAgICAgIHZhciBkYXRh
ICAgID0gJHRoaXMuZGF0YSgnYnMubW9kYWwnKQ0KICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVu
ZCh7fSwgTW9kYWwuREVGQVVMVFMsICR0aGlzLmRhdGEoKSwgdHlwZW9mIG9wdGlvbiA9PSAnb2Jq
ZWN0JyAmJiBvcHRpb24pDQoNCiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMubW9kYWwn
LCAoZGF0YSA9IG5ldyBNb2RhbCh0aGlzLCBvcHRpb25zKSkpDQogICAgICBpZiAodHlwZW9mIG9w
dGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRpb25dKF9yZWxhdGVkVGFyZ2V0KQ0KICAgICAgZWxz
ZSBpZiAob3B0aW9ucy5zaG93KSBkYXRhLnNob3coX3JlbGF0ZWRUYXJnZXQpDQogICAgfSkNCiAg
fQ0KDQogIHZhciBvbGQgPSAkLmZuLm1vZGFsDQoNCiAgJC5mbi5tb2RhbCAgICAgICAgICAgICA9
IFBsdWdpbg0KICAkLmZuLm1vZGFsLkNvbnN0cnVjdG9yID0gTW9kYWwNCg0KDQogIC8vIE1PREFM
IE5PIENPTkZMSUNUDQogIC8vID09PT09PT09PT09PT09PT09DQoNCiAgJC5mbi5tb2RhbC5ub0Nv
bmZsaWN0ID0gZnVuY3Rpb24gKCkgew0KICAgICQuZm4ubW9kYWwgPSBvbGQNCiAgICByZXR1cm4g
dGhpcw0KICB9DQoNCg0KICAvLyBNT0RBTCBEQVRBLUFQSQ0KICAvLyA9PT09PT09PT09PT09PQ0K
DQogICQoZG9jdW1lbnQpLm9uKCdjbGljay5icy5tb2RhbC5kYXRhLWFwaScsICdbZGF0YS10b2dn
bGU9Im1vZGFsIl0nLCBmdW5jdGlvbiAoZSkgew0KICAgIHZhciAkdGhpcyAgID0gJCh0aGlzKQ0K
ICAgIHZhciBocmVmICAgID0gJHRoaXMuYXR0cignaHJlZicpDQogICAgdmFyICR0YXJnZXQgPSAk
KCR0aGlzLmF0dHIoJ2RhdGEtdGFyZ2V0JykgfHwgKGhyZWYgJiYgaHJlZi5yZXBsYWNlKC8uKig/
PSNbXlxzXSskKS8sICcnKSkpIC8vIHN0cmlwIGZvciBpZTcNCiAgICB2YXIgb3B0aW9uICA9ICR0
YXJnZXQuZGF0YSgnYnMubW9kYWwnKSA/ICd0b2dnbGUnIDogJC5leHRlbmQoeyByZW1vdGU6ICEv
Iy8udGVzdChocmVmKSAmJiBocmVmIH0sICR0YXJnZXQuZGF0YSgpLCAkdGhpcy5kYXRhKCkpDQoN
CiAgICBpZiAoJHRoaXMuaXMoJ2EnKSkgZS5wcmV2ZW50RGVmYXVsdCgpDQoNCiAgICAkdGFyZ2V0
Lm9uZSgnc2hvdy5icy5tb2RhbCcsIGZ1bmN0aW9uIChzaG93RXZlbnQpIHsNCiAgICAgIGlmIChz
aG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVybiAvLyBvbmx5IHJlZ2lzdGVyIGZv
Y3VzIHJlc3RvcmVyIGlmIG1vZGFsIHdpbGwgYWN0dWFsbHkgZ2V0IHNob3duDQogICAgICAkdGFy
Z2V0Lm9uZSgnaGlkZGVuLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkgew0KICAgICAgICAkdGhpcy5p
cygnOnZpc2libGUnKSAmJiAkdGhpcy50cmlnZ2VyKCdmb2N1cycpDQogICAgICB9KQ0KICAgIH0p
DQogICAgUGx1Z2luLmNhbGwoJHRhcmdldCwgb3B0aW9uLCB0aGlzKQ0KICB9KQ0KDQp9KGpRdWVy
eSk7DQoNCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICogQm9vdHN0cmFwOiB0b29sdGlwLmpzIHYzLjMu
Nw0KICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jdG9vbHRpcA0KICogSW5z
cGlyZWQgYnkgdGhlIG9yaWdpbmFsIGpRdWVyeS50aXBzeSBieSBKYXNvbiBGcmFtZQ0KICogPT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09DQogKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFR3aXR0ZXIsIEluYy4NCiAqIExp
Y2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2Iv
bWFzdGVyL0xJQ0VOU0UpDQogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8NCg0KDQorZnVuY3Rpb24gKCQp
IHsNCiAgJ3VzZSBzdHJpY3QnOw0KDQogIC8vIFRPT0xUSVAgUFVCTElDIENMQVNTIERFRklOSVRJ
T04NCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KDQogIHZhciBUb29sdGlw
ID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHsNCiAgICB0aGlzLnR5cGUgICAgICAgPSBu
dWxsDQogICAgdGhpcy5vcHRpb25zICAgID0gbnVsbA0KICAgIHRoaXMuZW5hYmxlZCAgICA9IG51
bGwNCiAgICB0aGlzLnRpbWVvdXQgICAgPSBudWxsDQogICAgdGhpcy5ob3ZlclN0YXRlID0gbnVs
bA0KICAgIHRoaXMuJGVsZW1lbnQgICA9IG51bGwNCiAgICB0aGlzLmluU3RhdGUgICAgPSBudWxs
DQoNCiAgICB0aGlzLmluaXQoJ3Rvb2x0aXAnLCBlbGVtZW50LCBvcHRpb25zKQ0KICB9DQoNCiAg
VG9vbHRpcC5WRVJTSU9OICA9ICczLjMuNycNCg0KICBUb29sdGlwLlRSQU5TSVRJT05fRFVSQVRJ
T04gPSAxNTANCg0KICBUb29sdGlwLkRFRkFVTFRTID0gew0KICAgIGFuaW1hdGlvbjogdHJ1ZSwN
CiAgICBwbGFjZW1lbnQ6ICd0b3AnLA0KICAgIHNlbGVjdG9yOiBmYWxzZSwNCiAgICB0ZW1wbGF0
ZTogJzxkaXYgY2xhc3M9InRvb2x0aXAiIHJvbGU9InRvb2x0aXAiPjxkaXYgY2xhc3M9InRvb2x0
aXAtYXJyb3ciPjwvZGl2PjxkaXYgY2xhc3M9InRvb2x0aXAtaW5uZXIiPjwvZGl2PjwvZGl2Pics
DQogICAgdHJpZ2dlcjogJ2hvdmVyIGZvY3VzJywNCiAgICB0aXRsZTogJycsDQogICAgZGVsYXk6
IDAsDQogICAgaHRtbDogZmFsc2UsDQogICAgY29udGFpbmVyOiBmYWxzZSwNCiAgICB2aWV3cG9y
dDogew0KICAgICAgc2VsZWN0b3I6ICdib2R5JywNCiAgICAgIHBhZGRpbmc6IDANCiAgICB9DQog
IH0NCg0KICBUb29sdGlwLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHR5cGUsIGVsZW1lbnQs
IG9wdGlvbnMpIHsNCiAgICB0aGlzLmVuYWJsZWQgICA9IHRydWUNCiAgICB0aGlzLnR5cGUgICAg
ICA9IHR5cGUNCiAgICB0aGlzLiRlbGVtZW50ICA9ICQoZWxlbWVudCkNCiAgICB0aGlzLm9wdGlv
bnMgICA9IHRoaXMuZ2V0T3B0aW9ucyhvcHRpb25zKQ0KICAgIHRoaXMuJHZpZXdwb3J0ID0gdGhp
cy5vcHRpb25zLnZpZXdwb3J0ICYmICQoJC5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy52aWV3cG9y
dCkgPyB0aGlzLm9wdGlvbnMudmlld3BvcnQuY2FsbCh0aGlzLCB0aGlzLiRlbGVtZW50KSA6ICh0
aGlzLm9wdGlvbnMudmlld3BvcnQuc2VsZWN0b3IgfHwgdGhpcy5vcHRpb25zLnZpZXdwb3J0KSkN
CiAgICB0aGlzLmluU3RhdGUgICA9IHsgY2xpY2s6IGZhbHNlLCBob3ZlcjogZmFsc2UsIGZvY3Vz
OiBmYWxzZSB9DQoNCiAgICBpZiAodGhpcy4kZWxlbWVudFswXSBpbnN0YW5jZW9mIGRvY3VtZW50
LmNvbnN0cnVjdG9yICYmICF0aGlzLm9wdGlvbnMuc2VsZWN0b3IpIHsNCiAgICAgIHRocm93IG5l
dyBFcnJvcignYHNlbGVjdG9yYCBvcHRpb24gbXVzdCBiZSBzcGVjaWZpZWQgd2hlbiBpbml0aWFs
aXppbmcgJyArIHRoaXMudHlwZSArICcgb24gdGhlIHdpbmRvdy5kb2N1bWVudCBvYmplY3QhJykN
CiAgICB9DQoNCiAgICB2YXIgdHJpZ2dlcnMgPSB0aGlzLm9wdGlvbnMudHJpZ2dlci5zcGxpdCgn
ICcpDQoNCiAgICBmb3IgKHZhciBpID0gdHJpZ2dlcnMubGVuZ3RoOyBpLS07KSB7DQogICAgICB2
YXIgdHJpZ2dlciA9IHRyaWdnZXJzW2ldDQoNCiAgICAgIGlmICh0cmlnZ2VyID09ICdjbGljaycp
IHsNCiAgICAgICAgdGhpcy4kZWxlbWVudC5vbignY2xpY2suJyArIHRoaXMudHlwZSwgdGhpcy5v
cHRpb25zLnNlbGVjdG9yLCAkLnByb3h5KHRoaXMudG9nZ2xlLCB0aGlzKSkNCiAgICAgIH0gZWxz
ZSBpZiAodHJpZ2dlciAhPSAnbWFudWFsJykgew0KICAgICAgICB2YXIgZXZlbnRJbiAgPSB0cmln
Z2VyID09ICdob3ZlcicgPyAnbW91c2VlbnRlcicgOiAnZm9jdXNpbicNCiAgICAgICAgdmFyIGV2
ZW50T3V0ID0gdHJpZ2dlciA9PSAnaG92ZXInID8gJ21vdXNlbGVhdmUnIDogJ2ZvY3Vzb3V0Jw0K
DQogICAgICAgIHRoaXMuJGVsZW1lbnQub24oZXZlbnRJbiAgKyAnLicgKyB0aGlzLnR5cGUsIHRo
aXMub3B0aW9ucy5zZWxlY3RvciwgJC5wcm94eSh0aGlzLmVudGVyLCB0aGlzKSkNCiAgICAgICAg
dGhpcy4kZWxlbWVudC5vbihldmVudE91dCArICcuJyArIHRoaXMudHlwZSwgdGhpcy5vcHRpb25z
LnNlbGVjdG9yLCAkLnByb3h5KHRoaXMubGVhdmUsIHRoaXMpKQ0KICAgICAgfQ0KICAgIH0NCg0K
ICAgIHRoaXMub3B0aW9ucy5zZWxlY3RvciA/DQogICAgICAodGhpcy5fb3B0aW9ucyA9ICQuZXh0
ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIHsgdHJpZ2dlcjogJ21hbnVhbCcsIHNlbGVjdG9yOiAnJyB9
KSkgOg0KICAgICAgdGhpcy5maXhUaXRsZSgpDQogIH0NCg0KICBUb29sdGlwLnByb3RvdHlwZS5n
ZXREZWZhdWx0cyA9IGZ1bmN0aW9uICgpIHsNCiAgICByZXR1cm4gVG9vbHRpcC5ERUZBVUxUUw0K
ICB9DQoNCiAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25z
KSB7DQogICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLmdldERlZmF1bHRzKCksIHRoaXMu
JGVsZW1lbnQuZGF0YSgpLCBvcHRpb25zKQ0KDQogICAgaWYgKG9wdGlvbnMuZGVsYXkgJiYgdHlw
ZW9mIG9wdGlvbnMuZGVsYXkgPT0gJ251bWJlcicpIHsNCiAgICAgIG9wdGlvbnMuZGVsYXkgPSB7
DQogICAgICAgIHNob3c6IG9wdGlvbnMuZGVsYXksDQogICAgICAgIGhpZGU6IG9wdGlvbnMuZGVs
YXkNCiAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gb3B0aW9ucw0KICB9DQoNCiAgVG9vbHRp
cC5wcm90b3R5cGUuZ2V0RGVsZWdhdGVPcHRpb25zID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciBv
cHRpb25zICA9IHt9DQogICAgdmFyIGRlZmF1bHRzID0gdGhpcy5nZXREZWZhdWx0cygpDQoNCiAg
ICB0aGlzLl9vcHRpb25zICYmICQuZWFjaCh0aGlzLl9vcHRpb25zLCBmdW5jdGlvbiAoa2V5LCB2
YWx1ZSkgew0KICAgICAgaWYgKGRlZmF1bHRzW2tleV0gIT0gdmFsdWUpIG9wdGlvbnNba2V5XSA9
IHZhbHVlDQogICAgfSkNCg0KICAgIHJldHVybiBvcHRpb25zDQogIH0NCg0KICBUb29sdGlwLnBy
b3RvdHlwZS5lbnRlciA9IGZ1bmN0aW9uIChvYmopIHsNCiAgICB2YXIgc2VsZiA9IG9iaiBpbnN0
YW5jZW9mIHRoaXMuY29uc3RydWN0b3IgPw0KICAgICAgb2JqIDogJChvYmouY3VycmVudFRhcmdl
dCkuZGF0YSgnYnMuJyArIHRoaXMudHlwZSkNCg0KICAgIGlmICghc2VsZikgew0KICAgICAgc2Vs
ZiA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKG9iai5jdXJyZW50VGFyZ2V0LCB0aGlzLmdldERlbGVn
YXRlT3B0aW9ucygpKQ0KICAgICAgJChvYmouY3VycmVudFRhcmdldCkuZGF0YSgnYnMuJyArIHRo
aXMudHlwZSwgc2VsZikNCiAgICB9DQoNCiAgICBpZiAob2JqIGluc3RhbmNlb2YgJC5FdmVudCkg
ew0KICAgICAgc2VsZi5pblN0YXRlW29iai50eXBlID09ICdmb2N1c2luJyA/ICdmb2N1cycgOiAn
aG92ZXInXSA9IHRydWUNCiAgICB9DQoNCiAgICBpZiAoc2VsZi50aXAoKS5oYXNDbGFzcygnaW4n
KSB8fCBzZWxmLmhvdmVyU3RhdGUgPT0gJ2luJykgew0KICAgICAgc2VsZi5ob3ZlclN0YXRlID0g
J2luJw0KICAgICAgcmV0dXJuDQogICAgfQ0KDQogICAgY2xlYXJUaW1lb3V0KHNlbGYudGltZW91
dCkNCg0KICAgIHNlbGYuaG92ZXJTdGF0ZSA9ICdpbicNCg0KICAgIGlmICghc2VsZi5vcHRpb25z
LmRlbGF5IHx8ICFzZWxmLm9wdGlvbnMuZGVsYXkuc2hvdykgcmV0dXJuIHNlbGYuc2hvdygpDQoN
CiAgICBzZWxmLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmIChz
ZWxmLmhvdmVyU3RhdGUgPT0gJ2luJykgc2VsZi5zaG93KCkNCiAgICB9LCBzZWxmLm9wdGlvbnMu
ZGVsYXkuc2hvdykNCiAgfQ0KDQogIFRvb2x0aXAucHJvdG90eXBlLmlzSW5TdGF0ZVRydWUgPSBm
dW5jdGlvbiAoKSB7DQogICAgZm9yICh2YXIga2V5IGluIHRoaXMuaW5TdGF0ZSkgew0KICAgICAg
aWYgKHRoaXMuaW5TdGF0ZVtrZXldKSByZXR1cm4gdHJ1ZQ0KICAgIH0NCg0KICAgIHJldHVybiBm
YWxzZQ0KICB9DQoNCiAgVG9vbHRpcC5wcm90b3R5cGUubGVhdmUgPSBmdW5jdGlvbiAob2JqKSB7
DQogICAgdmFyIHNlbGYgPSBvYmogaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yID8NCiAgICAg
IG9iaiA6ICQob2JqLmN1cnJlbnRUYXJnZXQpLmRhdGEoJ2JzLicgKyB0aGlzLnR5cGUpDQoNCiAg
ICBpZiAoIXNlbGYpIHsNCiAgICAgIHNlbGYgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihvYmouY3Vy
cmVudFRhcmdldCwgdGhpcy5nZXREZWxlZ2F0ZU9wdGlvbnMoKSkNCiAgICAgICQob2JqLmN1cnJl
bnRUYXJnZXQpLmRhdGEoJ2JzLicgKyB0aGlzLnR5cGUsIHNlbGYpDQogICAgfQ0KDQogICAgaWYg
KG9iaiBpbnN0YW5jZW9mICQuRXZlbnQpIHsNCiAgICAgIHNlbGYuaW5TdGF0ZVtvYmoudHlwZSA9
PSAnZm9jdXNvdXQnID8gJ2ZvY3VzJyA6ICdob3ZlciddID0gZmFsc2UNCiAgICB9DQoNCiAgICBp
ZiAoc2VsZi5pc0luU3RhdGVUcnVlKCkpIHJldHVybg0KDQogICAgY2xlYXJUaW1lb3V0KHNlbGYu
dGltZW91dCkNCg0KICAgIHNlbGYuaG92ZXJTdGF0ZSA9ICdvdXQnDQoNCiAgICBpZiAoIXNlbGYu
b3B0aW9ucy5kZWxheSB8fCAhc2VsZi5vcHRpb25zLmRlbGF5LmhpZGUpIHJldHVybiBzZWxmLmhp
ZGUoKQ0KDQogICAgc2VsZi50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7DQogICAg
ICBpZiAoc2VsZi5ob3ZlclN0YXRlID09ICdvdXQnKSBzZWxmLmhpZGUoKQ0KICAgIH0sIHNlbGYu
b3B0aW9ucy5kZWxheS5oaWRlKQ0KICB9DQoNCiAgVG9vbHRpcC5wcm90b3R5cGUuc2hvdyA9IGZ1
bmN0aW9uICgpIHsNCiAgICB2YXIgZSA9ICQuRXZlbnQoJ3Nob3cuYnMuJyArIHRoaXMudHlwZSkN
Cg0KICAgIGlmICh0aGlzLmhhc0NvbnRlbnQoKSAmJiB0aGlzLmVuYWJsZWQpIHsNCiAgICAgIHRo
aXMuJGVsZW1lbnQudHJpZ2dlcihlKQ0KDQogICAgICB2YXIgaW5Eb20gPSAkLmNvbnRhaW5zKHRo
aXMuJGVsZW1lbnRbMF0ub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHRoaXMuJGVsZW1l
bnRbMF0pDQogICAgICBpZiAoZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSB8fCAhaW5Eb20pIHJldHVy
bg0KICAgICAgdmFyIHRoYXQgPSB0aGlzDQoNCiAgICAgIHZhciAkdGlwID0gdGhpcy50aXAoKQ0K
DQogICAgICB2YXIgdGlwSWQgPSB0aGlzLmdldFVJRCh0aGlzLnR5cGUpDQoNCiAgICAgIHRoaXMu
c2V0Q29udGVudCgpDQogICAgICAkdGlwLmF0dHIoJ2lkJywgdGlwSWQpDQogICAgICB0aGlzLiRl
bGVtZW50LmF0dHIoJ2FyaWEtZGVzY3JpYmVkYnknLCB0aXBJZCkNCg0KICAgICAgaWYgKHRoaXMu
b3B0aW9ucy5hbmltYXRpb24pICR0aXAuYWRkQ2xhc3MoJ2ZhZGUnKQ0KDQogICAgICB2YXIgcGxh
Y2VtZW50ID0gdHlwZW9mIHRoaXMub3B0aW9ucy5wbGFjZW1lbnQgPT0gJ2Z1bmN0aW9uJyA/DQog
ICAgICAgIHRoaXMub3B0aW9ucy5wbGFjZW1lbnQuY2FsbCh0aGlzLCAkdGlwWzBdLCB0aGlzLiRl
bGVtZW50WzBdKSA6DQogICAgICAgIHRoaXMub3B0aW9ucy5wbGFjZW1lbnQNCg0KICAgICAgdmFy
IGF1dG9Ub2tlbiA9IC9ccz9hdXRvP1xzPy9pDQogICAgICB2YXIgYXV0b1BsYWNlID0gYXV0b1Rv
a2VuLnRlc3QocGxhY2VtZW50KQ0KICAgICAgaWYgKGF1dG9QbGFjZSkgcGxhY2VtZW50ID0gcGxh
Y2VtZW50LnJlcGxhY2UoYXV0b1Rva2VuLCAnJykgfHwgJ3RvcCcNCg0KICAgICAgJHRpcA0KICAg
ICAgICAuZGV0YWNoKCkNCiAgICAgICAgLmNzcyh7IHRvcDogMCwgbGVmdDogMCwgZGlzcGxheTog
J2Jsb2NrJyB9KQ0KICAgICAgICAuYWRkQ2xhc3MocGxhY2VtZW50KQ0KICAgICAgICAuZGF0YSgn
YnMuJyArIHRoaXMudHlwZSwgdGhpcykNCg0KICAgICAgdGhpcy5vcHRpb25zLmNvbnRhaW5lciA/
ICR0aXAuYXBwZW5kVG8odGhpcy5vcHRpb25zLmNvbnRhaW5lcikgOiAkdGlwLmluc2VydEFmdGVy
KHRoaXMuJGVsZW1lbnQpDQogICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ2luc2VydGVkLmJz
LicgKyB0aGlzLnR5cGUpDQoNCiAgICAgIHZhciBwb3MgICAgICAgICAgPSB0aGlzLmdldFBvc2l0
aW9uKCkNCiAgICAgIHZhciBhY3R1YWxXaWR0aCAgPSAkdGlwWzBdLm9mZnNldFdpZHRoDQogICAg
ICB2YXIgYWN0dWFsSGVpZ2h0ID0gJHRpcFswXS5vZmZzZXRIZWlnaHQNCg0KICAgICAgaWYgKGF1
dG9QbGFjZSkgew0KICAgICAgICB2YXIgb3JnUGxhY2VtZW50ID0gcGxhY2VtZW50DQogICAgICAg
IHZhciB2aWV3cG9ydERpbSA9IHRoaXMuZ2V0UG9zaXRpb24odGhpcy4kdmlld3BvcnQpDQoNCiAg
ICAgICAgcGxhY2VtZW50ID0gcGxhY2VtZW50ID09ICdib3R0b20nICYmIHBvcy5ib3R0b20gKyBh
Y3R1YWxIZWlnaHQgPiB2aWV3cG9ydERpbS5ib3R0b20gPyAndG9wJyAgICA6DQogICAgICAgICAg
ICAgICAgICAgIHBsYWNlbWVudCA9PSAndG9wJyAgICAmJiBwb3MudG9wICAgIC0gYWN0dWFsSGVp
Z2h0IDwgdmlld3BvcnREaW0udG9wICAgID8gJ2JvdHRvbScgOg0KICAgICAgICAgICAgICAgICAg
ICBwbGFjZW1lbnQgPT0gJ3JpZ2h0JyAgJiYgcG9zLnJpZ2h0ICArIGFjdHVhbFdpZHRoICA+IHZp
ZXdwb3J0RGltLndpZHRoICA/ICdsZWZ0JyAgIDoNCiAgICAgICAgICAgICAgICAgICAgcGxhY2Vt
ZW50ID09ICdsZWZ0JyAgICYmIHBvcy5sZWZ0ICAgLSBhY3R1YWxXaWR0aCAgPCB2aWV3cG9ydERp
bS5sZWZ0ICAgPyAncmlnaHQnICA6DQogICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudA0KDQog
ICAgICAgICR0aXANCiAgICAgICAgICAucmVtb3ZlQ2xhc3Mob3JnUGxhY2VtZW50KQ0KICAgICAg
ICAgIC5hZGRDbGFzcyhwbGFjZW1lbnQpDQogICAgICB9DQoNCiAgICAgIHZhciBjYWxjdWxhdGVk
T2Zmc2V0ID0gdGhpcy5nZXRDYWxjdWxhdGVkT2Zmc2V0KHBsYWNlbWVudCwgcG9zLCBhY3R1YWxX
aWR0aCwgYWN0dWFsSGVpZ2h0KQ0KDQogICAgICB0aGlzLmFwcGx5UGxhY2VtZW50KGNhbGN1bGF0
ZWRPZmZzZXQsIHBsYWNlbWVudCkNCg0KICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gKCkg
ew0KICAgICAgICB2YXIgcHJldkhvdmVyU3RhdGUgPSB0aGF0LmhvdmVyU3RhdGUNCiAgICAgICAg
dGhhdC4kZWxlbWVudC50cmlnZ2VyKCdzaG93bi5icy4nICsgdGhhdC50eXBlKQ0KICAgICAgICB0
aGF0LmhvdmVyU3RhdGUgPSBudWxsDQoNCiAgICAgICAgaWYgKHByZXZIb3ZlclN0YXRlID09ICdv
dXQnKSB0aGF0LmxlYXZlKHRoYXQpDQogICAgICB9DQoNCiAgICAgICQuc3VwcG9ydC50cmFuc2l0
aW9uICYmIHRoaXMuJHRpcC5oYXNDbGFzcygnZmFkZScpID8NCiAgICAgICAgJHRpcA0KICAgICAg
ICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGNvbXBsZXRlKQ0KICAgICAgICAgIC5lbXVsYXRl
VHJhbnNpdGlvbkVuZChUb29sdGlwLlRSQU5TSVRJT05fRFVSQVRJT04pIDoNCiAgICAgICAgY29t
cGxldGUoKQ0KICAgIH0NCiAgfQ0KDQogIFRvb2x0aXAucHJvdG90eXBlLmFwcGx5UGxhY2VtZW50
ID0gZnVuY3Rpb24gKG9mZnNldCwgcGxhY2VtZW50KSB7DQogICAgdmFyICR0aXAgICA9IHRoaXMu
dGlwKCkNCiAgICB2YXIgd2lkdGggID0gJHRpcFswXS5vZmZzZXRXaWR0aA0KICAgIHZhciBoZWln
aHQgPSAkdGlwWzBdLm9mZnNldEhlaWdodA0KDQogICAgLy8gbWFudWFsbHkgcmVhZCBtYXJnaW5z
IGJlY2F1c2UgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGluY2x1ZGVzIGRpZmZlcmVuY2UNCiAgICB2
YXIgbWFyZ2luVG9wID0gcGFyc2VJbnQoJHRpcC5jc3MoJ21hcmdpbi10b3AnKSwgMTApDQogICAg
dmFyIG1hcmdpbkxlZnQgPSBwYXJzZUludCgkdGlwLmNzcygnbWFyZ2luLWxlZnQnKSwgMTApDQoN
CiAgICAvLyB3ZSBtdXN0IGNoZWNrIGZvciBOYU4gZm9yIGllIDgvOQ0KICAgIGlmIChpc05hTiht
YXJnaW5Ub3ApKSAgbWFyZ2luVG9wICA9IDANCiAgICBpZiAoaXNOYU4obWFyZ2luTGVmdCkpIG1h
cmdpbkxlZnQgPSAwDQoNCiAgICBvZmZzZXQudG9wICArPSBtYXJnaW5Ub3ANCiAgICBvZmZzZXQu
bGVmdCArPSBtYXJnaW5MZWZ0DQoNCiAgICAvLyAkLmZuLm9mZnNldCBkb2Vzbid0IHJvdW5kIHBp
eGVsIHZhbHVlcw0KICAgIC8vIHNvIHdlIHVzZSBzZXRPZmZzZXQgZGlyZWN0bHkgd2l0aCBvdXIg
b3duIGZ1bmN0aW9uIEItMA0KICAgICQub2Zmc2V0LnNldE9mZnNldCgkdGlwWzBdLCAkLmV4dGVu
ZCh7DQogICAgICB1c2luZzogZnVuY3Rpb24gKHByb3BzKSB7DQogICAgICAgICR0aXAuY3NzKHsN
CiAgICAgICAgICB0b3A6IE1hdGgucm91bmQocHJvcHMudG9wKSwNCiAgICAgICAgICBsZWZ0OiBN
YXRoLnJvdW5kKHByb3BzLmxlZnQpDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwgb2Zmc2V0
KSwgMCkNCg0KICAgICR0aXAuYWRkQ2xhc3MoJ2luJykNCg0KICAgIC8vIGNoZWNrIHRvIHNlZSBp
ZiBwbGFjaW5nIHRpcCBpbiBuZXcgb2Zmc2V0IGNhdXNlZCB0aGUgdGlwIHRvIHJlc2l6ZSBpdHNl
bGYNCiAgICB2YXIgYWN0dWFsV2lkdGggID0gJHRpcFswXS5vZmZzZXRXaWR0aA0KICAgIHZhciBh
Y3R1YWxIZWlnaHQgPSAkdGlwWzBdLm9mZnNldEhlaWdodA0KDQogICAgaWYgKHBsYWNlbWVudCA9
PSAndG9wJyAmJiBhY3R1YWxIZWlnaHQgIT0gaGVpZ2h0KSB7DQogICAgICBvZmZzZXQudG9wID0g
b2Zmc2V0LnRvcCArIGhlaWdodCAtIGFjdHVhbEhlaWdodA0KICAgIH0NCg0KICAgIHZhciBkZWx0
YSA9IHRoaXMuZ2V0Vmlld3BvcnRBZGp1c3RlZERlbHRhKHBsYWNlbWVudCwgb2Zmc2V0LCBhY3R1
YWxXaWR0aCwgYWN0dWFsSGVpZ2h0KQ0KDQogICAgaWYgKGRlbHRhLmxlZnQpIG9mZnNldC5sZWZ0
ICs9IGRlbHRhLmxlZnQNCiAgICBlbHNlIG9mZnNldC50b3AgKz0gZGVsdGEudG9wDQoNCiAgICB2
YXIgaXNWZXJ0aWNhbCAgICAgICAgICA9IC90b3B8Ym90dG9tLy50ZXN0KHBsYWNlbWVudCkNCiAg
ICB2YXIgYXJyb3dEZWx0YSAgICAgICAgICA9IGlzVmVydGljYWwgPyBkZWx0YS5sZWZ0ICogMiAt
IHdpZHRoICsgYWN0dWFsV2lkdGggOiBkZWx0YS50b3AgKiAyIC0gaGVpZ2h0ICsgYWN0dWFsSGVp
Z2h0DQogICAgdmFyIGFycm93T2Zmc2V0UG9zaXRpb24gPSBpc1ZlcnRpY2FsID8gJ29mZnNldFdp
ZHRoJyA6ICdvZmZzZXRIZWlnaHQnDQoNCiAgICAkdGlwLm9mZnNldChvZmZzZXQpDQogICAgdGhp
cy5yZXBsYWNlQXJyb3coYXJyb3dEZWx0YSwgJHRpcFswXVthcnJvd09mZnNldFBvc2l0aW9uXSwg
aXNWZXJ0aWNhbCkNCiAgfQ0KDQogIFRvb2x0aXAucHJvdG90eXBlLnJlcGxhY2VBcnJvdyA9IGZ1
bmN0aW9uIChkZWx0YSwgZGltZW5zaW9uLCBpc1ZlcnRpY2FsKSB7DQogICAgdGhpcy5hcnJvdygp
DQogICAgICAuY3NzKGlzVmVydGljYWwgPyAnbGVmdCcgOiAndG9wJywgNTAgKiAoMSAtIGRlbHRh
IC8gZGltZW5zaW9uKSArICclJykNCiAgICAgIC5jc3MoaXNWZXJ0aWNhbCA/ICd0b3AnIDogJ2xl
ZnQnLCAnJykNCiAgfQ0KDQogIFRvb2x0aXAucHJvdG90eXBlLnNldENvbnRlbnQgPSBmdW5jdGlv
biAoKSB7DQogICAgdmFyICR0aXAgID0gdGhpcy50aXAoKQ0KICAgIHZhciB0aXRsZSA9IHRoaXMu
Z2V0VGl0bGUoKQ0KDQogICAgJHRpcC5maW5kKCcudG9vbHRpcC1pbm5lcicpW3RoaXMub3B0aW9u
cy5odG1sID8gJ2h0bWwnIDogJ3RleHQnXSh0aXRsZSkNCiAgICAkdGlwLnJlbW92ZUNsYXNzKCdm
YWRlIGluIHRvcCBib3R0b20gbGVmdCByaWdodCcpDQogIH0NCg0KICBUb29sdGlwLnByb3RvdHlw
ZS5oaWRlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7DQogICAgdmFyIHRoYXQgPSB0aGlzDQogICAg
dmFyICR0aXAgPSAkKHRoaXMuJHRpcCkNCiAgICB2YXIgZSAgICA9ICQuRXZlbnQoJ2hpZGUuYnMu
JyArIHRoaXMudHlwZSkNCg0KICAgIGZ1bmN0aW9uIGNvbXBsZXRlKCkgew0KICAgICAgaWYgKHRo
YXQuaG92ZXJTdGF0ZSAhPSAnaW4nKSAkdGlwLmRldGFjaCgpDQogICAgICBpZiAodGhhdC4kZWxl
bWVudCkgeyAvLyBUT0RPOiBDaGVjayB3aGV0aGVyIGd1YXJkaW5nIHRoaXMgY29kZSB3aXRoIHRo
aXMgYGlmYCBpcyByZWFsbHkgbmVjZXNzYXJ5Lg0KICAgICAgICB0aGF0LiRlbGVtZW50DQogICAg
ICAgICAgLnJlbW92ZUF0dHIoJ2FyaWEtZGVzY3JpYmVkYnknKQ0KICAgICAgICAgIC50cmlnZ2Vy
KCdoaWRkZW4uYnMuJyArIHRoYXQudHlwZSkNCiAgICAgIH0NCiAgICAgIGNhbGxiYWNrICYmIGNh
bGxiYWNrKCkNCiAgICB9DQoNCiAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoZSkNCg0KICAgIGlm
IChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm4NCg0KICAgICR0aXAucmVtb3ZlQ2xhc3Mo
J2luJykNCg0KICAgICQuc3VwcG9ydC50cmFuc2l0aW9uICYmICR0aXAuaGFzQ2xhc3MoJ2ZhZGUn
KSA/DQogICAgICAkdGlwDQogICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGNvbXBsZXRl
KQ0KICAgICAgICAuZW11bGF0ZVRyYW5zaXRpb25FbmQoVG9vbHRpcC5UUkFOU0lUSU9OX0RVUkFU
SU9OKSA6DQogICAgICBjb21wbGV0ZSgpDQoNCiAgICB0aGlzLmhvdmVyU3RhdGUgPSBudWxsDQoN
CiAgICByZXR1cm4gdGhpcw0KICB9DQoNCiAgVG9vbHRpcC5wcm90b3R5cGUuZml4VGl0bGUgPSBm
dW5jdGlvbiAoKSB7DQogICAgdmFyICRlID0gdGhpcy4kZWxlbWVudA0KICAgIGlmICgkZS5hdHRy
KCd0aXRsZScpIHx8IHR5cGVvZiAkZS5hdHRyKCdkYXRhLW9yaWdpbmFsLXRpdGxlJykgIT0gJ3N0
cmluZycpIHsNCiAgICAgICRlLmF0dHIoJ2RhdGEtb3JpZ2luYWwtdGl0bGUnLCAkZS5hdHRyKCd0
aXRsZScpIHx8ICcnKS5hdHRyKCd0aXRsZScsICcnKQ0KICAgIH0NCiAgfQ0KDQogIFRvb2x0aXAu
cHJvdG90eXBlLmhhc0NvbnRlbnQgPSBmdW5jdGlvbiAoKSB7DQogICAgcmV0dXJuIHRoaXMuZ2V0
VGl0bGUoKQ0KICB9DQoNCiAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlv
biAoJGVsZW1lbnQpIHsNCiAgICAkZWxlbWVudCAgID0gJGVsZW1lbnQgfHwgdGhpcy4kZWxlbWVu
dA0KDQogICAgdmFyIGVsICAgICA9ICRlbGVtZW50WzBdDQogICAgdmFyIGlzQm9keSA9IGVsLnRh
Z05hbWUgPT0gJ0JPRFknDQoNCiAgICB2YXIgZWxSZWN0ICAgID0gZWwuZ2V0Qm91bmRpbmdDbGll
bnRSZWN0KCkNCiAgICBpZiAoZWxSZWN0LndpZHRoID09IG51bGwpIHsNCiAgICAgIC8vIHdpZHRo
IGFuZCBoZWlnaHQgYXJlIG1pc3NpbmcgaW4gSUU4LCBzbyBjb21wdXRlIHRoZW0gbWFudWFsbHk7
IHNlZSBodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvaXNzdWVzLzE0MDkzDQogICAg
ICBlbFJlY3QgPSAkLmV4dGVuZCh7fSwgZWxSZWN0LCB7IHdpZHRoOiBlbFJlY3QucmlnaHQgLSBl
bFJlY3QubGVmdCwgaGVpZ2h0OiBlbFJlY3QuYm90dG9tIC0gZWxSZWN0LnRvcCB9KQ0KICAgIH0N
CiAgICB2YXIgaXNTdmcgPSB3aW5kb3cuU1ZHRWxlbWVudCAmJiBlbCBpbnN0YW5jZW9mIHdpbmRv
dy5TVkdFbGVtZW50DQogICAgLy8gQXZvaWQgdXNpbmcgJC5vZmZzZXQoKSBvbiBTVkdzIHNpbmNl
IGl0IGdpdmVzIGluY29ycmVjdCByZXN1bHRzIGluIGpRdWVyeSAzLg0KICAgIC8vIFNlZSBodHRw
czovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvaXNzdWVzLzIwMjgwDQogICAgdmFyIGVsT2Zm
c2V0ICA9IGlzQm9keSA/IHsgdG9wOiAwLCBsZWZ0OiAwIH0gOiAoaXNTdmcgPyBudWxsIDogJGVs
ZW1lbnQub2Zmc2V0KCkpDQogICAgdmFyIHNjcm9sbCAgICA9IHsgc2Nyb2xsOiBpc0JvZHkgPyBk
b2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xs
VG9wIDogJGVsZW1lbnQuc2Nyb2xsVG9wKCkgfQ0KICAgIHZhciBvdXRlckRpbXMgPSBpc0JvZHkg
PyB7IHdpZHRoOiAkKHdpbmRvdykud2lkdGgoKSwgaGVpZ2h0OiAkKHdpbmRvdykuaGVpZ2h0KCkg
fSA6IG51bGwNCg0KICAgIHJldHVybiAkLmV4dGVuZCh7fSwgZWxSZWN0LCBzY3JvbGwsIG91dGVy
RGltcywgZWxPZmZzZXQpDQogIH0NCg0KICBUb29sdGlwLnByb3RvdHlwZS5nZXRDYWxjdWxhdGVk
T2Zmc2V0ID0gZnVuY3Rpb24gKHBsYWNlbWVudCwgcG9zLCBhY3R1YWxXaWR0aCwgYWN0dWFsSGVp
Z2h0KSB7DQogICAgcmV0dXJuIHBsYWNlbWVudCA9PSAnYm90dG9tJyA/IHsgdG9wOiBwb3MudG9w
ICsgcG9zLmhlaWdodCwgICBsZWZ0OiBwb3MubGVmdCArIHBvcy53aWR0aCAvIDIgLSBhY3R1YWxX
aWR0aCAvIDIgfSA6DQogICAgICAgICAgIHBsYWNlbWVudCA9PSAndG9wJyAgICA/IHsgdG9wOiBw
b3MudG9wIC0gYWN0dWFsSGVpZ2h0LCBsZWZ0OiBwb3MubGVmdCArIHBvcy53aWR0aCAvIDIgLSBh
Y3R1YWxXaWR0aCAvIDIgfSA6DQogICAgICAgICAgIHBsYWNlbWVudCA9PSAnbGVmdCcgICA/IHsg
dG9wOiBwb3MudG9wICsgcG9zLmhlaWdodCAvIDIgLSBhY3R1YWxIZWlnaHQgLyAyLCBsZWZ0OiBw
b3MubGVmdCAtIGFjdHVhbFdpZHRoIH0gOg0KICAgICAgICAvKiBwbGFjZW1lbnQgPT0gJ3JpZ2h0
JyAqLyB7IHRvcDogcG9zLnRvcCArIHBvcy5oZWlnaHQgLyAyIC0gYWN0dWFsSGVpZ2h0IC8gMiwg
bGVmdDogcG9zLmxlZnQgKyBwb3Mud2lkdGggfQ0KDQogIH0NCg0KICBUb29sdGlwLnByb3RvdHlw
ZS5nZXRWaWV3cG9ydEFkanVzdGVkRGVsdGEgPSBmdW5jdGlvbiAocGxhY2VtZW50LCBwb3MsIGFj
dHVhbFdpZHRoLCBhY3R1YWxIZWlnaHQpIHsNCiAgICB2YXIgZGVsdGEgPSB7IHRvcDogMCwgbGVm
dDogMCB9DQogICAgaWYgKCF0aGlzLiR2aWV3cG9ydCkgcmV0dXJuIGRlbHRhDQoNCiAgICB2YXIg
dmlld3BvcnRQYWRkaW5nID0gdGhpcy5vcHRpb25zLnZpZXdwb3J0ICYmIHRoaXMub3B0aW9ucy52
aWV3cG9ydC5wYWRkaW5nIHx8IDANCiAgICB2YXIgdmlld3BvcnREaW1lbnNpb25zID0gdGhpcy5n
ZXRQb3NpdGlvbih0aGlzLiR2aWV3cG9ydCkNCg0KICAgIGlmICgvcmlnaHR8bGVmdC8udGVzdChw
bGFjZW1lbnQpKSB7DQogICAgICB2YXIgdG9wRWRnZU9mZnNldCAgICA9IHBvcy50b3AgLSB2aWV3
cG9ydFBhZGRpbmcgLSB2aWV3cG9ydERpbWVuc2lvbnMuc2Nyb2xsDQogICAgICB2YXIgYm90dG9t
RWRnZU9mZnNldCA9IHBvcy50b3AgKyB2aWV3cG9ydFBhZGRpbmcgLSB2aWV3cG9ydERpbWVuc2lv
bnMuc2Nyb2xsICsgYWN0dWFsSGVpZ2h0DQogICAgICBpZiAodG9wRWRnZU9mZnNldCA8IHZpZXdw
b3J0RGltZW5zaW9ucy50b3ApIHsgLy8gdG9wIG92ZXJmbG93DQogICAgICAgIGRlbHRhLnRvcCA9
IHZpZXdwb3J0RGltZW5zaW9ucy50b3AgLSB0b3BFZGdlT2Zmc2V0DQogICAgICB9IGVsc2UgaWYg
KGJvdHRvbUVkZ2VPZmZzZXQgPiB2aWV3cG9ydERpbWVuc2lvbnMudG9wICsgdmlld3BvcnREaW1l
bnNpb25zLmhlaWdodCkgeyAvLyBib3R0b20gb3ZlcmZsb3cNCiAgICAgICAgZGVsdGEudG9wID0g
dmlld3BvcnREaW1lbnNpb25zLnRvcCArIHZpZXdwb3J0RGltZW5zaW9ucy5oZWlnaHQgLSBib3R0
b21FZGdlT2Zmc2V0DQogICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgIHZhciBsZWZ0RWRnZU9m
ZnNldCAgPSBwb3MubGVmdCAtIHZpZXdwb3J0UGFkZGluZw0KICAgICAgdmFyIHJpZ2h0RWRnZU9m
ZnNldCA9IHBvcy5sZWZ0ICsgdmlld3BvcnRQYWRkaW5nICsgYWN0dWFsV2lkdGgNCiAgICAgIGlm
IChsZWZ0RWRnZU9mZnNldCA8IHZpZXdwb3J0RGltZW5zaW9ucy5sZWZ0KSB7IC8vIGxlZnQgb3Zl
cmZsb3cNCiAgICAgICAgZGVsdGEubGVmdCA9IHZpZXdwb3J0RGltZW5zaW9ucy5sZWZ0IC0gbGVm
dEVkZ2VPZmZzZXQNCiAgICAgIH0gZWxzZSBpZiAocmlnaHRFZGdlT2Zmc2V0ID4gdmlld3BvcnRE
aW1lbnNpb25zLnJpZ2h0KSB7IC8vIHJpZ2h0IG92ZXJmbG93DQogICAgICAgIGRlbHRhLmxlZnQg
PSB2aWV3cG9ydERpbWVuc2lvbnMubGVmdCArIHZpZXdwb3J0RGltZW5zaW9ucy53aWR0aCAtIHJp
Z2h0RWRnZU9mZnNldA0KICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiBkZWx0YQ0KICB9DQoN
CiAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0VGl0bGUgPSBmdW5jdGlvbiAoKSB7DQogICAgdmFyIHRp
dGxlDQogICAgdmFyICRlID0gdGhpcy4kZWxlbWVudA0KICAgIHZhciBvICA9IHRoaXMub3B0aW9u
cw0KDQogICAgdGl0bGUgPSAkZS5hdHRyKCdkYXRhLW9yaWdpbmFsLXRpdGxlJykNCiAgICAgIHx8
ICh0eXBlb2Ygby50aXRsZSA9PSAnZnVuY3Rpb24nID8gby50aXRsZS5jYWxsKCRlWzBdKSA6ICBv
LnRpdGxlKQ0KDQogICAgcmV0dXJuIHRpdGxlDQogIH0NCg0KICBUb29sdGlwLnByb3RvdHlwZS5n
ZXRVSUQgPSBmdW5jdGlvbiAocHJlZml4KSB7DQogICAgZG8gcHJlZml4ICs9IH5+KE1hdGgucmFu
ZG9tKCkgKiAxMDAwMDAwKQ0KICAgIHdoaWxlIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmVm
aXgpKQ0KICAgIHJldHVybiBwcmVmaXgNCiAgfQ0KDQogIFRvb2x0aXAucHJvdG90eXBlLnRpcCA9
IGZ1bmN0aW9uICgpIHsNCiAgICBpZiAoIXRoaXMuJHRpcCkgew0KICAgICAgdGhpcy4kdGlwID0g
JCh0aGlzLm9wdGlvbnMudGVtcGxhdGUpDQogICAgICBpZiAodGhpcy4kdGlwLmxlbmd0aCAhPSAx
KSB7DQogICAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLnR5cGUgKyAnIGB0ZW1wbGF0ZWAgb3B0
aW9uIG11c3QgY29uc2lzdCBvZiBleGFjdGx5IDEgdG9wLWxldmVsIGVsZW1lbnQhJykNCiAgICAg
IH0NCiAgICB9DQogICAgcmV0dXJuIHRoaXMuJHRpcA0KICB9DQoNCiAgVG9vbHRpcC5wcm90b3R5
cGUuYXJyb3cgPSBmdW5jdGlvbiAoKSB7DQogICAgcmV0dXJuICh0aGlzLiRhcnJvdyA9IHRoaXMu
JGFycm93IHx8IHRoaXMudGlwKCkuZmluZCgnLnRvb2x0aXAtYXJyb3cnKSkNCiAgfQ0KDQogIFRv
b2x0aXAucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uICgpIHsNCiAgICB0aGlzLmVuYWJsZWQg
PSB0cnVlDQogIH0NCg0KICBUb29sdGlwLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gKCkg
ew0KICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlDQogIH0NCg0KICBUb29sdGlwLnByb3RvdHlwZS50
b2dnbGVFbmFibGVkID0gZnVuY3Rpb24gKCkgew0KICAgIHRoaXMuZW5hYmxlZCA9ICF0aGlzLmVu
YWJsZWQNCiAgfQ0KDQogIFRvb2x0aXAucHJvdG90eXBlLnRvZ2dsZSA9IGZ1bmN0aW9uIChlKSB7
DQogICAgdmFyIHNlbGYgPSB0aGlzDQogICAgaWYgKGUpIHsNCiAgICAgIHNlbGYgPSAkKGUuY3Vy
cmVudFRhcmdldCkuZGF0YSgnYnMuJyArIHRoaXMudHlwZSkNCiAgICAgIGlmICghc2VsZikgew0K
ICAgICAgICBzZWxmID0gbmV3IHRoaXMuY29uc3RydWN0b3IoZS5jdXJyZW50VGFyZ2V0LCB0aGlz
LmdldERlbGVnYXRlT3B0aW9ucygpKQ0KICAgICAgICAkKGUuY3VycmVudFRhcmdldCkuZGF0YSgn
YnMuJyArIHRoaXMudHlwZSwgc2VsZikNCiAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoZSkgew0K
ICAgICAgc2VsZi5pblN0YXRlLmNsaWNrID0gIXNlbGYuaW5TdGF0ZS5jbGljaw0KICAgICAgaWYg
KHNlbGYuaXNJblN0YXRlVHJ1ZSgpKSBzZWxmLmVudGVyKHNlbGYpDQogICAgICBlbHNlIHNlbGYu
bGVhdmUoc2VsZikNCiAgICB9IGVsc2Ugew0KICAgICAgc2VsZi50aXAoKS5oYXNDbGFzcygnaW4n
KSA/IHNlbGYubGVhdmUoc2VsZikgOiBzZWxmLmVudGVyKHNlbGYpDQogICAgfQ0KICB9DQoNCiAg
VG9vbHRpcC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHsNCiAgICB2YXIgdGhhdCA9
IHRoaXMNCiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KQ0KICAgIHRoaXMuaGlkZShmdW5j
dGlvbiAoKSB7DQogICAgICB0aGF0LiRlbGVtZW50Lm9mZignLicgKyB0aGF0LnR5cGUpLnJlbW92
ZURhdGEoJ2JzLicgKyB0aGF0LnR5cGUpDQogICAgICBpZiAodGhhdC4kdGlwKSB7DQogICAgICAg
IHRoYXQuJHRpcC5kZXRhY2goKQ0KICAgICAgfQ0KICAgICAgdGhhdC4kdGlwID0gbnVsbA0KICAg
ICAgdGhhdC4kYXJyb3cgPSBudWxsDQogICAgICB0aGF0LiR2aWV3cG9ydCA9IG51bGwNCiAgICAg
IHRoYXQuJGVsZW1lbnQgPSBudWxsDQogICAgfSkNCiAgfQ0KDQoNCiAgLy8gVE9PTFRJUCBQTFVH
SU4gREVGSU5JVElPTg0KICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09DQoNCiAgZnVuY3Rp
b24gUGx1Z2luKG9wdGlvbikgew0KICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgew0K
ICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpDQogICAgICB2YXIgZGF0YSAgICA9ICR0aGlzLmRh
dGEoJ2JzLnRvb2x0aXAnKQ0KICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9uID09ICdv
YmplY3QnICYmIG9wdGlvbg0KDQogICAgICBpZiAoIWRhdGEgJiYgL2Rlc3Ryb3l8aGlkZS8udGVz
dChvcHRpb24pKSByZXR1cm4NCiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMudG9vbHRp
cCcsIChkYXRhID0gbmV3IFRvb2x0aXAodGhpcywgb3B0aW9ucykpKQ0KICAgICAgaWYgKHR5cGVv
ZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpDQogICAgfSkNCiAgfQ0KDQogIHZh
ciBvbGQgPSAkLmZuLnRvb2x0aXANCg0KICAkLmZuLnRvb2x0aXAgICAgICAgICAgICAgPSBQbHVn
aW4NCiAgJC5mbi50b29sdGlwLkNvbnN0cnVjdG9yID0gVG9vbHRpcA0KDQoNCiAgLy8gVE9PTFRJ
UCBOTyBDT05GTElDVA0KICAvLyA9PT09PT09PT09PT09PT09PT09DQoNCiAgJC5mbi50b29sdGlw
Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7DQogICAgJC5mbi50b29sdGlwID0gb2xkDQogICAg
cmV0dXJuIHRoaXMNCiAgfQ0KDQp9KGpRdWVyeSk7DQoNCi8qID09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICog
Qm9vdHN0cmFwOiBwb3BvdmVyLmpzIHYzLjMuNw0KICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20v
amF2YXNjcmlwdC8jcG9wb3ZlcnMNCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KICogQ29weXJpZ2h0IDIw
MTEtMjAxNiBUd2l0dGVyLCBJbmMuDQogKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0
aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKQ0KICogPT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09ICovDQoNCg0KK2Z1bmN0aW9uICgkKSB7DQogICd1c2Ugc3RyaWN0JzsNCg0KICAvLyBQ
T1BPVkVSIFBVQkxJQyBDTEFTUyBERUZJTklUSU9ODQogIC8vID09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT0NCg0KICB2YXIgUG9wb3ZlciA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25z
KSB7DQogICAgdGhpcy5pbml0KCdwb3BvdmVyJywgZWxlbWVudCwgb3B0aW9ucykNCiAgfQ0KDQog
IGlmICghJC5mbi50b29sdGlwKSB0aHJvdyBuZXcgRXJyb3IoJ1BvcG92ZXIgcmVxdWlyZXMgdG9v
bHRpcC5qcycpDQoNCiAgUG9wb3Zlci5WRVJTSU9OICA9ICczLjMuNycNCg0KICBQb3BvdmVyLkRF
RkFVTFRTID0gJC5leHRlbmQoe30sICQuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvci5ERUZBVUxUUywg
ew0KICAgIHBsYWNlbWVudDogJ3JpZ2h0JywNCiAgICB0cmlnZ2VyOiAnY2xpY2snLA0KICAgIGNv
bnRlbnQ6ICcnLA0KICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz0icG9wb3ZlciIgcm9sZT0idG9v
bHRpcCI+PGRpdiBjbGFzcz0iYXJyb3ciPjwvZGl2PjxoMyBjbGFzcz0icG9wb3Zlci10aXRsZSI+
PC9oMz48ZGl2IGNsYXNzPSJwb3BvdmVyLWNvbnRlbnQiPjwvZGl2PjwvZGl2PicNCiAgfSkNCg0K
DQogIC8vIE5PVEU6IFBPUE9WRVIgRVhURU5EUyB0b29sdGlwLmpzDQogIC8vID09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09DQoNCiAgUG9wb3Zlci5wcm90b3R5cGUgPSAkLmV4dGVuZCh7
fSwgJC5mbi50b29sdGlwLkNvbnN0cnVjdG9yLnByb3RvdHlwZSkNCg0KICBQb3BvdmVyLnByb3Rv
dHlwZS5jb25zdHJ1Y3RvciA9IFBvcG92ZXINCg0KICBQb3BvdmVyLnByb3RvdHlwZS5nZXREZWZh
dWx0cyA9IGZ1bmN0aW9uICgpIHsNCiAgICByZXR1cm4gUG9wb3Zlci5ERUZBVUxUUw0KICB9DQoN
CiAgUG9wb3Zlci5wcm90b3R5cGUuc2V0Q29udGVudCA9IGZ1bmN0aW9uICgpIHsNCiAgICB2YXIg
JHRpcCAgICA9IHRoaXMudGlwKCkNCiAgICB2YXIgdGl0bGUgICA9IHRoaXMuZ2V0VGl0bGUoKQ0K
ICAgIHZhciBjb250ZW50ID0gdGhpcy5nZXRDb250ZW50KCkNCg0KICAgICR0aXAuZmluZCgnLnBv
cG92ZXItdGl0bGUnKVt0aGlzLm9wdGlvbnMuaHRtbCA/ICdodG1sJyA6ICd0ZXh0J10odGl0bGUp
DQogICAgJHRpcC5maW5kKCcucG9wb3Zlci1jb250ZW50JykuY2hpbGRyZW4oKS5kZXRhY2goKS5l
bmQoKVsgLy8gd2UgdXNlIGFwcGVuZCBmb3IgaHRtbCBvYmplY3RzIHRvIG1haW50YWluIGpzIGV2
ZW50cw0KICAgICAgdGhpcy5vcHRpb25zLmh0bWwgPyAodHlwZW9mIGNvbnRlbnQgPT0gJ3N0cmlu
ZycgPyAnaHRtbCcgOiAnYXBwZW5kJykgOiAndGV4dCcNCiAgICBdKGNvbnRlbnQpDQoNCiAgICAk
dGlwLnJlbW92ZUNsYXNzKCdmYWRlIHRvcCBib3R0b20gbGVmdCByaWdodCBpbicpDQoNCiAgICAv
LyBJRTggZG9lc24ndCBhY2NlcHQgaGlkaW5nIHZpYSB0aGUgYDplbXB0eWAgcHNldWRvIHNlbGVj
dG9yLCB3ZSBoYXZlIHRvIGRvDQogICAgLy8gdGhpcyBtYW51YWxseSBieSBjaGVja2luZyB0aGUg
Y29udGVudHMuDQogICAgaWYgKCEkdGlwLmZpbmQoJy5wb3BvdmVyLXRpdGxlJykuaHRtbCgpKSAk
dGlwLmZpbmQoJy5wb3BvdmVyLXRpdGxlJykuaGlkZSgpDQogIH0NCg0KICBQb3BvdmVyLnByb3Rv
dHlwZS5oYXNDb250ZW50ID0gZnVuY3Rpb24gKCkgew0KICAgIHJldHVybiB0aGlzLmdldFRpdGxl
KCkgfHwgdGhpcy5nZXRDb250ZW50KCkNCiAgfQ0KDQogIFBvcG92ZXIucHJvdG90eXBlLmdldENv
bnRlbnQgPSBmdW5jdGlvbiAoKSB7DQogICAgdmFyICRlID0gdGhpcy4kZWxlbWVudA0KICAgIHZh
ciBvICA9IHRoaXMub3B0aW9ucw0KDQogICAgcmV0dXJuICRlLmF0dHIoJ2RhdGEtY29udGVudCcp
DQogICAgICB8fCAodHlwZW9mIG8uY29udGVudCA9PSAnZnVuY3Rpb24nID8NCiAgICAgICAgICAg
IG8uY29udGVudC5jYWxsKCRlWzBdKSA6DQogICAgICAgICAgICBvLmNvbnRlbnQpDQogIH0NCg0K
ICBQb3BvdmVyLnByb3RvdHlwZS5hcnJvdyA9IGZ1bmN0aW9uICgpIHsNCiAgICByZXR1cm4gKHRo
aXMuJGFycm93ID0gdGhpcy4kYXJyb3cgfHwgdGhpcy50aXAoKS5maW5kKCcuYXJyb3cnKSkNCiAg
fQ0KDQoNCiAgLy8gUE9QT1ZFUiBQTFVHSU4gREVGSU5JVElPTg0KICAvLyA9PT09PT09PT09PT09
PT09PT09PT09PT09DQoNCiAgZnVuY3Rpb24gUGx1Z2luKG9wdGlvbikgew0KICAgIHJldHVybiB0
aGlzLmVhY2goZnVuY3Rpb24gKCkgew0KICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpDQogICAg
ICB2YXIgZGF0YSAgICA9ICR0aGlzLmRhdGEoJ2JzLnBvcG92ZXInKQ0KICAgICAgdmFyIG9wdGlv
bnMgPSB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvbg0KDQogICAgICBpZiAoIWRh
dGEgJiYgL2Rlc3Ryb3l8aGlkZS8udGVzdChvcHRpb24pKSByZXR1cm4NCiAgICAgIGlmICghZGF0
YSkgJHRoaXMuZGF0YSgnYnMucG9wb3ZlcicsIChkYXRhID0gbmV3IFBvcG92ZXIodGhpcywgb3B0
aW9ucykpKQ0KICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9u
XSgpDQogICAgfSkNCiAgfQ0KDQogIHZhciBvbGQgPSAkLmZuLnBvcG92ZXINCg0KICAkLmZuLnBv
cG92ZXIgICAgICAgICAgICAgPSBQbHVnaW4NCiAgJC5mbi5wb3BvdmVyLkNvbnN0cnVjdG9yID0g
UG9wb3Zlcg0KDQoNCiAgLy8gUE9QT1ZFUiBOTyBDT05GTElDVA0KICAvLyA9PT09PT09PT09PT09
PT09PT09DQoNCiAgJC5mbi5wb3BvdmVyLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7DQogICAg
JC5mbi5wb3BvdmVyID0gb2xkDQogICAgcmV0dXJuIHRoaXMNCiAgfQ0KDQp9KGpRdWVyeSk7DQoN
Ci8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PQ0KICogQm9vdHN0cmFwOiBzY3JvbGxzcHkuanMgdjMuMy43DQog
KiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNzY3JvbGxzcHkNCiAqID09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PQ0KICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuDQogKiBMaWNl
bnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21h
c3Rlci9MSUNFTlNFKQ0KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovDQoNCg0KK2Z1bmN0aW9uICgkKSB7
DQogICd1c2Ugc3RyaWN0JzsNCg0KICAvLyBTQ1JPTExTUFkgQ0xBU1MgREVGSU5JVElPTg0KICAv
LyA9PT09PT09PT09PT09PT09PT09PT09PT09PQ0KDQogIGZ1bmN0aW9uIFNjcm9sbFNweShlbGVt
ZW50LCBvcHRpb25zKSB7DQogICAgdGhpcy4kYm9keSAgICAgICAgICA9ICQoZG9jdW1lbnQuYm9k
eSkNCiAgICB0aGlzLiRzY3JvbGxFbGVtZW50ID0gJChlbGVtZW50KS5pcyhkb2N1bWVudC5ib2R5
KSA/ICQod2luZG93KSA6ICQoZWxlbWVudCkNCiAgICB0aGlzLm9wdGlvbnMgICAgICAgID0gJC5l
eHRlbmQoe30sIFNjcm9sbFNweS5ERUZBVUxUUywgb3B0aW9ucykNCiAgICB0aGlzLnNlbGVjdG9y
ICAgICAgID0gKHRoaXMub3B0aW9ucy50YXJnZXQgfHwgJycpICsgJyAubmF2IGxpID4gYScNCiAg
ICB0aGlzLm9mZnNldHMgICAgICAgID0gW10NCiAgICB0aGlzLnRhcmdldHMgICAgICAgID0gW10N
CiAgICB0aGlzLmFjdGl2ZVRhcmdldCAgID0gbnVsbA0KICAgIHRoaXMuc2Nyb2xsSGVpZ2h0ICAg
PSAwDQoNCiAgICB0aGlzLiRzY3JvbGxFbGVtZW50Lm9uKCdzY3JvbGwuYnMuc2Nyb2xsc3B5Jywg
JC5wcm94eSh0aGlzLnByb2Nlc3MsIHRoaXMpKQ0KICAgIHRoaXMucmVmcmVzaCgpDQogICAgdGhp
cy5wcm9jZXNzKCkNCiAgfQ0KDQogIFNjcm9sbFNweS5WRVJTSU9OICA9ICczLjMuNycNCg0KICBT
Y3JvbGxTcHkuREVGQVVMVFMgPSB7DQogICAgb2Zmc2V0OiAxMA0KICB9DQoNCiAgU2Nyb2xsU3B5
LnByb3RvdHlwZS5nZXRTY3JvbGxIZWlnaHQgPSBmdW5jdGlvbiAoKSB7DQogICAgcmV0dXJuIHRo
aXMuJHNjcm9sbEVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0IHx8IE1hdGgubWF4KHRoaXMuJGJvZHlb
MF0uc2Nyb2xsSGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KQ0K
ICB9DQoNCiAgU2Nyb2xsU3B5LnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkgew0KICAg
IHZhciB0aGF0ICAgICAgICAgID0gdGhpcw0KICAgIHZhciBvZmZzZXRNZXRob2QgID0gJ29mZnNl
dCcNCiAgICB2YXIgb2Zmc2V0QmFzZSAgICA9IDANCg0KICAgIHRoaXMub2Zmc2V0cyAgICAgID0g
W10NCiAgICB0aGlzLnRhcmdldHMgICAgICA9IFtdDQogICAgdGhpcy5zY3JvbGxIZWlnaHQgPSB0
aGlzLmdldFNjcm9sbEhlaWdodCgpDQoNCiAgICBpZiAoISQuaXNXaW5kb3codGhpcy4kc2Nyb2xs
RWxlbWVudFswXSkpIHsNCiAgICAgIG9mZnNldE1ldGhvZCA9ICdwb3NpdGlvbicNCiAgICAgIG9m
ZnNldEJhc2UgICA9IHRoaXMuJHNjcm9sbEVsZW1lbnQuc2Nyb2xsVG9wKCkNCiAgICB9DQoNCiAg
ICB0aGlzLiRib2R5DQogICAgICAuZmluZCh0aGlzLnNlbGVjdG9yKQ0KICAgICAgLm1hcChmdW5j
dGlvbiAoKSB7DQogICAgICAgIHZhciAkZWwgICA9ICQodGhpcykNCiAgICAgICAgdmFyIGhyZWYg
ID0gJGVsLmRhdGEoJ3RhcmdldCcpIHx8ICRlbC5hdHRyKCdocmVmJykNCiAgICAgICAgdmFyICRo
cmVmID0gL14jLi8udGVzdChocmVmKSAmJiAkKGhyZWYpDQoNCiAgICAgICAgcmV0dXJuICgkaHJl
Zg0KICAgICAgICAgICYmICRocmVmLmxlbmd0aA0KICAgICAgICAgICYmICRocmVmLmlzKCc6dmlz
aWJsZScpDQogICAgICAgICAgJiYgW1skaHJlZltvZmZzZXRNZXRob2RdKCkudG9wICsgb2Zmc2V0
QmFzZSwgaHJlZl1dKSB8fCBudWxsDQogICAgICB9KQ0KICAgICAgLnNvcnQoZnVuY3Rpb24gKGEs
IGIpIHsgcmV0dXJuIGFbMF0gLSBiWzBdIH0pDQogICAgICAuZWFjaChmdW5jdGlvbiAoKSB7DQog
ICAgICAgIHRoYXQub2Zmc2V0cy5wdXNoKHRoaXNbMF0pDQogICAgICAgIHRoYXQudGFyZ2V0cy5w
dXNoKHRoaXNbMV0pDQogICAgICB9KQ0KICB9DQoNCiAgU2Nyb2xsU3B5LnByb3RvdHlwZS5wcm9j
ZXNzID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciBzY3JvbGxUb3AgICAgPSB0aGlzLiRzY3JvbGxF
bGVtZW50LnNjcm9sbFRvcCgpICsgdGhpcy5vcHRpb25zLm9mZnNldA0KICAgIHZhciBzY3JvbGxI
ZWlnaHQgPSB0aGlzLmdldFNjcm9sbEhlaWdodCgpDQogICAgdmFyIG1heFNjcm9sbCAgICA9IHRo
aXMub3B0aW9ucy5vZmZzZXQgKyBzY3JvbGxIZWlnaHQgLSB0aGlzLiRzY3JvbGxFbGVtZW50Lmhl
aWdodCgpDQogICAgdmFyIG9mZnNldHMgICAgICA9IHRoaXMub2Zmc2V0cw0KICAgIHZhciB0YXJn
ZXRzICAgICAgPSB0aGlzLnRhcmdldHMNCiAgICB2YXIgYWN0aXZlVGFyZ2V0ID0gdGhpcy5hY3Rp
dmVUYXJnZXQNCiAgICB2YXIgaQ0KDQogICAgaWYgKHRoaXMuc2Nyb2xsSGVpZ2h0ICE9IHNjcm9s
bEhlaWdodCkgew0KICAgICAgdGhpcy5yZWZyZXNoKCkNCiAgICB9DQoNCiAgICBpZiAoc2Nyb2xs
VG9wID49IG1heFNjcm9sbCkgew0KICAgICAgcmV0dXJuIGFjdGl2ZVRhcmdldCAhPSAoaSA9IHRh
cmdldHNbdGFyZ2V0cy5sZW5ndGggLSAxXSkgJiYgdGhpcy5hY3RpdmF0ZShpKQ0KICAgIH0NCg0K
ICAgIGlmIChhY3RpdmVUYXJnZXQgJiYgc2Nyb2xsVG9wIDwgb2Zmc2V0c1swXSkgew0KICAgICAg
dGhpcy5hY3RpdmVUYXJnZXQgPSBudWxsDQogICAgICByZXR1cm4gdGhpcy5jbGVhcigpDQogICAg
fQ0KDQogICAgZm9yIChpID0gb2Zmc2V0cy5sZW5ndGg7IGktLTspIHsNCiAgICAgIGFjdGl2ZVRh
cmdldCAhPSB0YXJnZXRzW2ldDQogICAgICAgICYmIHNjcm9sbFRvcCA+PSBvZmZzZXRzW2ldDQog
ICAgICAgICYmIChvZmZzZXRzW2kgKyAxXSA9PT0gdW5kZWZpbmVkIHx8IHNjcm9sbFRvcCA8IG9m
ZnNldHNbaSArIDFdKQ0KICAgICAgICAmJiB0aGlzLmFjdGl2YXRlKHRhcmdldHNbaV0pDQogICAg
fQ0KICB9DQoNCiAgU2Nyb2xsU3B5LnByb3RvdHlwZS5hY3RpdmF0ZSA9IGZ1bmN0aW9uICh0YXJn
ZXQpIHsNCiAgICB0aGlzLmFjdGl2ZVRhcmdldCA9IHRhcmdldA0KDQogICAgdGhpcy5jbGVhcigp
DQoNCiAgICB2YXIgc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yICsNCiAgICAgICdbZGF0YS10YXJn
ZXQ9IicgKyB0YXJnZXQgKyAnIl0sJyArDQogICAgICB0aGlzLnNlbGVjdG9yICsgJ1tocmVmPSIn
ICsgdGFyZ2V0ICsgJyJdJw0KDQogICAgdmFyIGFjdGl2ZSA9ICQoc2VsZWN0b3IpDQogICAgICAu
cGFyZW50cygnbGknKQ0KICAgICAgLmFkZENsYXNzKCdhY3RpdmUnKQ0KDQogICAgaWYgKGFjdGl2
ZS5wYXJlbnQoJy5kcm9wZG93bi1tZW51JykubGVuZ3RoKSB7DQogICAgICBhY3RpdmUgPSBhY3Rp
dmUNCiAgICAgICAgLmNsb3Nlc3QoJ2xpLmRyb3Bkb3duJykNCiAgICAgICAgLmFkZENsYXNzKCdh
Y3RpdmUnKQ0KICAgIH0NCg0KICAgIGFjdGl2ZS50cmlnZ2VyKCdhY3RpdmF0ZS5icy5zY3JvbGxz
cHknKQ0KICB9DQoNCiAgU2Nyb2xsU3B5LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsN
CiAgICAkKHRoaXMuc2VsZWN0b3IpDQogICAgICAucGFyZW50c1VudGlsKHRoaXMub3B0aW9ucy50
YXJnZXQsICcuYWN0aXZlJykNCiAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJykNCiAgfQ0KDQoN
CiAgLy8gU0NST0xMU1BZIFBMVUdJTiBERUZJTklUSU9ODQogIC8vID09PT09PT09PT09PT09PT09
PT09PT09PT09PQ0KDQogIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHsNCiAgICByZXR1cm4gdGhp
cy5lYWNoKGZ1bmN0aW9uICgpIHsNCiAgICAgIHZhciAkdGhpcyAgID0gJCh0aGlzKQ0KICAgICAg
dmFyIGRhdGEgICAgPSAkdGhpcy5kYXRhKCdicy5zY3JvbGxzcHknKQ0KICAgICAgdmFyIG9wdGlv
bnMgPSB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvbg0KDQogICAgICBpZiAoIWRh
dGEpICR0aGlzLmRhdGEoJ2JzLnNjcm9sbHNweScsIChkYXRhID0gbmV3IFNjcm9sbFNweSh0aGlz
LCBvcHRpb25zKSkpDQogICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtv
cHRpb25dKCkNCiAgICB9KQ0KICB9DQoNCiAgdmFyIG9sZCA9ICQuZm4uc2Nyb2xsc3B5DQoNCiAg
JC5mbi5zY3JvbGxzcHkgICAgICAgICAgICAgPSBQbHVnaW4NCiAgJC5mbi5zY3JvbGxzcHkuQ29u
c3RydWN0b3IgPSBTY3JvbGxTcHkNCg0KDQogIC8vIFNDUk9MTFNQWSBOTyBDT05GTElDVA0KICAv
LyA9PT09PT09PT09PT09PT09PT09PT0NCg0KICAkLmZuLnNjcm9sbHNweS5ub0NvbmZsaWN0ID0g
ZnVuY3Rpb24gKCkgew0KICAgICQuZm4uc2Nyb2xsc3B5ID0gb2xkDQogICAgcmV0dXJuIHRoaXMN
CiAgfQ0KDQoNCiAgLy8gU0NST0xMU1BZIERBVEEtQVBJDQogIC8vID09PT09PT09PT09PT09PT09
PQ0KDQogICQod2luZG93KS5vbignbG9hZC5icy5zY3JvbGxzcHkuZGF0YS1hcGknLCBmdW5jdGlv
biAoKSB7DQogICAgJCgnW2RhdGEtc3B5PSJzY3JvbGwiXScpLmVhY2goZnVuY3Rpb24gKCkgew0K
ICAgICAgdmFyICRzcHkgPSAkKHRoaXMpDQogICAgICBQbHVnaW4uY2FsbCgkc3B5LCAkc3B5LmRh
dGEoKSkNCiAgICB9KQ0KICB9KQ0KDQp9KGpRdWVyeSk7DQoNCi8qID09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0K
ICogQm9vdHN0cmFwOiB0YWIuanMgdjMuMy43DQogKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9q
YXZhc2NyaXB0LyN0YWJzDQogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAqIENvcHlyaWdodCAyMDExLTIw
MTYgVHdpdHRlciwgSW5jLg0KICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5j
b20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSkNCiAqID09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PSAqLw0KDQoNCitmdW5jdGlvbiAoJCkgew0KICAndXNlIHN0cmljdCc7DQoNCiAgLy8gVEFCIENM
QVNTIERFRklOSVRJT04NCiAgLy8gPT09PT09PT09PT09PT09PT09PT0NCg0KICB2YXIgVGFiID0g
ZnVuY3Rpb24gKGVsZW1lbnQpIHsNCiAgICAvLyBqc2NzOmRpc2FibGUgcmVxdWlyZURvbGxhckJl
Zm9yZWpRdWVyeUFzc2lnbm1lbnQNCiAgICB0aGlzLmVsZW1lbnQgPSAkKGVsZW1lbnQpDQogICAg
Ly8ganNjczplbmFibGUgcmVxdWlyZURvbGxhckJlZm9yZWpRdWVyeUFzc2lnbm1lbnQNCiAgfQ0K
DQogIFRhYi5WRVJTSU9OID0gJzMuMy43Jw0KDQogIFRhYi5UUkFOU0lUSU9OX0RVUkFUSU9OID0g
MTUwDQoNCiAgVGFiLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciAkdGhp
cyAgICA9IHRoaXMuZWxlbWVudA0KICAgIHZhciAkdWwgICAgICA9ICR0aGlzLmNsb3Nlc3QoJ3Vs
Om5vdCguZHJvcGRvd24tbWVudSknKQ0KICAgIHZhciBzZWxlY3RvciA9ICR0aGlzLmRhdGEoJ3Rh
cmdldCcpDQoNCiAgICBpZiAoIXNlbGVjdG9yKSB7DQogICAgICBzZWxlY3RvciA9ICR0aGlzLmF0
dHIoJ2hyZWYnKQ0KICAgICAgc2VsZWN0b3IgPSBzZWxlY3RvciAmJiBzZWxlY3Rvci5yZXBsYWNl
KC8uKig/PSNbXlxzXSokKS8sICcnKSAvLyBzdHJpcCBmb3IgaWU3DQogICAgfQ0KDQogICAgaWYg
KCR0aGlzLnBhcmVudCgnbGknKS5oYXNDbGFzcygnYWN0aXZlJykpIHJldHVybg0KDQogICAgdmFy
ICRwcmV2aW91cyA9ICR1bC5maW5kKCcuYWN0aXZlOmxhc3QgYScpDQogICAgdmFyIGhpZGVFdmVu
dCA9ICQuRXZlbnQoJ2hpZGUuYnMudGFiJywgew0KICAgICAgcmVsYXRlZFRhcmdldDogJHRoaXNb
MF0NCiAgICB9KQ0KICAgIHZhciBzaG93RXZlbnQgPSAkLkV2ZW50KCdzaG93LmJzLnRhYicsIHsN
CiAgICAgIHJlbGF0ZWRUYXJnZXQ6ICRwcmV2aW91c1swXQ0KICAgIH0pDQoNCiAgICAkcHJldmlv
dXMudHJpZ2dlcihoaWRlRXZlbnQpDQogICAgJHRoaXMudHJpZ2dlcihzaG93RXZlbnQpDQoNCiAg
ICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8IGhpZGVFdmVudC5pc0RlZmF1
bHRQcmV2ZW50ZWQoKSkgcmV0dXJuDQoNCiAgICB2YXIgJHRhcmdldCA9ICQoc2VsZWN0b3IpDQoN
CiAgICB0aGlzLmFjdGl2YXRlKCR0aGlzLmNsb3Nlc3QoJ2xpJyksICR1bCkNCiAgICB0aGlzLmFj
dGl2YXRlKCR0YXJnZXQsICR0YXJnZXQucGFyZW50KCksIGZ1bmN0aW9uICgpIHsNCiAgICAgICRw
cmV2aW91cy50cmlnZ2VyKHsNCiAgICAgICAgdHlwZTogJ2hpZGRlbi5icy50YWInLA0KICAgICAg
ICByZWxhdGVkVGFyZ2V0OiAkdGhpc1swXQ0KICAgICAgfSkNCiAgICAgICR0aGlzLnRyaWdnZXIo
ew0KICAgICAgICB0eXBlOiAnc2hvd24uYnMudGFiJywNCiAgICAgICAgcmVsYXRlZFRhcmdldDog
JHByZXZpb3VzWzBdDQogICAgICB9KQ0KICAgIH0pDQogIH0NCg0KICBUYWIucHJvdG90eXBlLmFj
dGl2YXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spIHsNCiAgICB2
YXIgJGFjdGl2ZSAgICA9IGNvbnRhaW5lci5maW5kKCc+IC5hY3RpdmUnKQ0KICAgIHZhciB0cmFu
c2l0aW9uID0gY2FsbGJhY2sNCiAgICAgICYmICQuc3VwcG9ydC50cmFuc2l0aW9uDQogICAgICAm
JiAoJGFjdGl2ZS5sZW5ndGggJiYgJGFjdGl2ZS5oYXNDbGFzcygnZmFkZScpIHx8ICEhY29udGFp
bmVyLmZpbmQoJz4gLmZhZGUnKS5sZW5ndGgpDQoNCiAgICBmdW5jdGlvbiBuZXh0KCkgew0KICAg
ICAgJGFjdGl2ZQ0KICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpDQogICAgICAgIC5maW5k
KCc+IC5kcm9wZG93bi1tZW51ID4gLmFjdGl2ZScpDQogICAgICAgICAgLnJlbW92ZUNsYXNzKCdh
Y3RpdmUnKQ0KICAgICAgICAuZW5kKCkNCiAgICAgICAgLmZpbmQoJ1tkYXRhLXRvZ2dsZT0idGFi
Il0nKQ0KICAgICAgICAgIC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgZmFsc2UpDQoNCiAgICAgIGVs
ZW1lbnQNCiAgICAgICAgLmFkZENsYXNzKCdhY3RpdmUnKQ0KICAgICAgICAuZmluZCgnW2RhdGEt
dG9nZ2xlPSJ0YWIiXScpDQogICAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKQ0K
DQogICAgICBpZiAodHJhbnNpdGlvbikgew0KICAgICAgICBlbGVtZW50WzBdLm9mZnNldFdpZHRo
IC8vIHJlZmxvdyBmb3IgdHJhbnNpdGlvbg0KICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdpbicp
DQogICAgICB9IGVsc2Ugew0KICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCdmYWRlJykNCiAg
ICAgIH0NCg0KICAgICAgaWYgKGVsZW1lbnQucGFyZW50KCcuZHJvcGRvd24tbWVudScpLmxlbmd0
aCkgew0KICAgICAgICBlbGVtZW50DQogICAgICAgICAgLmNsb3Nlc3QoJ2xpLmRyb3Bkb3duJykN
CiAgICAgICAgICAgIC5hZGRDbGFzcygnYWN0aXZlJykNCiAgICAgICAgICAuZW5kKCkNCiAgICAg
ICAgICAuZmluZCgnW2RhdGEtdG9nZ2xlPSJ0YWIiXScpDQogICAgICAgICAgICAuYXR0cignYXJp
YS1leHBhbmRlZCcsIHRydWUpDQogICAgICB9DQoNCiAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNr
KCkNCiAgICB9DQoNCiAgICAkYWN0aXZlLmxlbmd0aCAmJiB0cmFuc2l0aW9uID8NCiAgICAgICRh
Y3RpdmUNCiAgICAgICAgLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgbmV4dCkNCiAgICAgICAgLmVt
dWxhdGVUcmFuc2l0aW9uRW5kKFRhYi5UUkFOU0lUSU9OX0RVUkFUSU9OKSA6DQogICAgICBuZXh0
KCkNCg0KICAgICRhY3RpdmUucmVtb3ZlQ2xhc3MoJ2luJykNCiAgfQ0KDQoNCiAgLy8gVEFCIFBM
VUdJTiBERUZJTklUSU9ODQogIC8vID09PT09PT09PT09PT09PT09PT09PQ0KDQogIGZ1bmN0aW9u
IFBsdWdpbihvcHRpb24pIHsNCiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsNCiAg
ICAgIHZhciAkdGhpcyA9ICQodGhpcykNCiAgICAgIHZhciBkYXRhICA9ICR0aGlzLmRhdGEoJ2Jz
LnRhYicpDQoNCiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnYnMudGFiJywgKGRhdGEgPSBu
ZXcgVGFiKHRoaXMpKSkNCiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRh
W29wdGlvbl0oKQ0KICAgIH0pDQogIH0NCg0KICB2YXIgb2xkID0gJC5mbi50YWINCg0KICAkLmZu
LnRhYiAgICAgICAgICAgICA9IFBsdWdpbg0KICAkLmZuLnRhYi5Db25zdHJ1Y3RvciA9IFRhYg0K
DQoNCiAgLy8gVEFCIE5PIENPTkZMSUNUDQogIC8vID09PT09PT09PT09PT09PQ0KDQogICQuZm4u
dGFiLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7DQogICAgJC5mbi50YWIgPSBvbGQNCiAgICBy
ZXR1cm4gdGhpcw0KICB9DQoNCg0KICAvLyBUQUIgREFUQS1BUEkNCiAgLy8gPT09PT09PT09PT09
DQoNCiAgdmFyIGNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7DQogICAgZS5wcmV2ZW50RGVm
YXVsdCgpDQogICAgUGx1Z2luLmNhbGwoJCh0aGlzKSwgJ3Nob3cnKQ0KICB9DQoNCiAgJChkb2N1
bWVudCkNCiAgICAub24oJ2NsaWNrLmJzLnRhYi5kYXRhLWFwaScsICdbZGF0YS10b2dnbGU9InRh
YiJdJywgY2xpY2tIYW5kbGVyKQ0KICAgIC5vbignY2xpY2suYnMudGFiLmRhdGEtYXBpJywgJ1tk
YXRhLXRvZ2dsZT0icGlsbCJdJywgY2xpY2tIYW5kbGVyKQ0KDQp9KGpRdWVyeSk7DQoNCi8qID09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PQ0KICogQm9vdHN0cmFwOiBhZmZpeC5qcyB2My4zLjcNCiAqIGh0dHA6Ly9n
ZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI2FmZml4DQogKiA9PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiAq
IENvcHlyaWdodCAyMDExLTIwMTYgVHdpdHRlciwgSW5jLg0KICogTGljZW5zZWQgdW5kZXIgTUlU
IChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSkN
CiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PSAqLw0KDQoNCitmdW5jdGlvbiAoJCkgew0KICAndXNlIHN0cmlj
dCc7DQoNCiAgLy8gQUZGSVggQ0xBU1MgREVGSU5JVElPTg0KICAvLyA9PT09PT09PT09PT09PT09
PT09PT09DQoNCiAgdmFyIEFmZml4ID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHsNCiAg
ICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQWZmaXguREVGQVVMVFMsIG9wdGlvbnMpDQoN
CiAgICB0aGlzLiR0YXJnZXQgPSAkKHRoaXMub3B0aW9ucy50YXJnZXQpDQogICAgICAub24oJ3Nj
cm9sbC5icy5hZmZpeC5kYXRhLWFwaScsICQucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uLCB0aGlz
KSkNCiAgICAgIC5vbignY2xpY2suYnMuYWZmaXguZGF0YS1hcGknLCAgJC5wcm94eSh0aGlzLmNo
ZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wLCB0aGlzKSkNCg0KICAgIHRoaXMuJGVsZW1lbnQgICAg
ID0gJChlbGVtZW50KQ0KICAgIHRoaXMuYWZmaXhlZCAgICAgID0gbnVsbA0KICAgIHRoaXMudW5w
aW4gICAgICAgID0gbnVsbA0KICAgIHRoaXMucGlubmVkT2Zmc2V0ID0gbnVsbA0KDQogICAgdGhp
cy5jaGVja1Bvc2l0aW9uKCkNCiAgfQ0KDQogIEFmZml4LlZFUlNJT04gID0gJzMuMy43Jw0KDQog
IEFmZml4LlJFU0VUICAgID0gJ2FmZml4IGFmZml4LXRvcCBhZmZpeC1ib3R0b20nDQoNCiAgQWZm
aXguREVGQVVMVFMgPSB7DQogICAgb2Zmc2V0OiAwLA0KICAgIHRhcmdldDogd2luZG93DQogIH0N
Cg0KICBBZmZpeC5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoc2Nyb2xsSGVpZ2h0LCBo
ZWlnaHQsIG9mZnNldFRvcCwgb2Zmc2V0Qm90dG9tKSB7DQogICAgdmFyIHNjcm9sbFRvcCAgICA9
IHRoaXMuJHRhcmdldC5zY3JvbGxUb3AoKQ0KICAgIHZhciBwb3NpdGlvbiAgICAgPSB0aGlzLiRl
bGVtZW50Lm9mZnNldCgpDQogICAgdmFyIHRhcmdldEhlaWdodCA9IHRoaXMuJHRhcmdldC5oZWln
aHQoKQ0KDQogICAgaWYgKG9mZnNldFRvcCAhPSBudWxsICYmIHRoaXMuYWZmaXhlZCA9PSAndG9w
JykgcmV0dXJuIHNjcm9sbFRvcCA8IG9mZnNldFRvcCA/ICd0b3AnIDogZmFsc2UNCg0KICAgIGlm
ICh0aGlzLmFmZml4ZWQgPT0gJ2JvdHRvbScpIHsNCiAgICAgIGlmIChvZmZzZXRUb3AgIT0gbnVs
bCkgcmV0dXJuIChzY3JvbGxUb3AgKyB0aGlzLnVucGluIDw9IHBvc2l0aW9uLnRvcCkgPyBmYWxz
ZSA6ICdib3R0b20nDQogICAgICByZXR1cm4gKHNjcm9sbFRvcCArIHRhcmdldEhlaWdodCA8PSBz
Y3JvbGxIZWlnaHQgLSBvZmZzZXRCb3R0b20pID8gZmFsc2UgOiAnYm90dG9tJw0KICAgIH0NCg0K
ICAgIHZhciBpbml0aWFsaXppbmcgICA9IHRoaXMuYWZmaXhlZCA9PSBudWxsDQogICAgdmFyIGNv
bGxpZGVyVG9wICAgID0gaW5pdGlhbGl6aW5nID8gc2Nyb2xsVG9wIDogcG9zaXRpb24udG9wDQog
ICAgdmFyIGNvbGxpZGVySGVpZ2h0ID0gaW5pdGlhbGl6aW5nID8gdGFyZ2V0SGVpZ2h0IDogaGVp
Z2h0DQoNCiAgICBpZiAob2Zmc2V0VG9wICE9IG51bGwgJiYgc2Nyb2xsVG9wIDw9IG9mZnNldFRv
cCkgcmV0dXJuICd0b3AnDQogICAgaWYgKG9mZnNldEJvdHRvbSAhPSBudWxsICYmIChjb2xsaWRl
clRvcCArIGNvbGxpZGVySGVpZ2h0ID49IHNjcm9sbEhlaWdodCAtIG9mZnNldEJvdHRvbSkpIHJl
dHVybiAnYm90dG9tJw0KDQogICAgcmV0dXJuIGZhbHNlDQogIH0NCg0KICBBZmZpeC5wcm90b3R5
cGUuZ2V0UGlubmVkT2Zmc2V0ID0gZnVuY3Rpb24gKCkgew0KICAgIGlmICh0aGlzLnBpbm5lZE9m
ZnNldCkgcmV0dXJuIHRoaXMucGlubmVkT2Zmc2V0DQogICAgdGhpcy4kZWxlbWVudC5yZW1vdmVD
bGFzcyhBZmZpeC5SRVNFVCkuYWRkQ2xhc3MoJ2FmZml4JykNCiAgICB2YXIgc2Nyb2xsVG9wID0g
dGhpcy4kdGFyZ2V0LnNjcm9sbFRvcCgpDQogICAgdmFyIHBvc2l0aW9uICA9IHRoaXMuJGVsZW1l
bnQub2Zmc2V0KCkNCiAgICByZXR1cm4gKHRoaXMucGlubmVkT2Zmc2V0ID0gcG9zaXRpb24udG9w
IC0gc2Nyb2xsVG9wKQ0KICB9DQoNCiAgQWZmaXgucHJvdG90eXBlLmNoZWNrUG9zaXRpb25XaXRo
RXZlbnRMb29wID0gZnVuY3Rpb24gKCkgew0KICAgIHNldFRpbWVvdXQoJC5wcm94eSh0aGlzLmNo
ZWNrUG9zaXRpb24sIHRoaXMpLCAxKQ0KICB9DQoNCiAgQWZmaXgucHJvdG90eXBlLmNoZWNrUG9z
aXRpb24gPSBmdW5jdGlvbiAoKSB7DQogICAgaWYgKCF0aGlzLiRlbGVtZW50LmlzKCc6dmlzaWJs
ZScpKSByZXR1cm4NCg0KICAgIHZhciBoZWlnaHQgICAgICAgPSB0aGlzLiRlbGVtZW50LmhlaWdo
dCgpDQogICAgdmFyIG9mZnNldCAgICAgICA9IHRoaXMub3B0aW9ucy5vZmZzZXQNCiAgICB2YXIg
b2Zmc2V0VG9wICAgID0gb2Zmc2V0LnRvcA0KICAgIHZhciBvZmZzZXRCb3R0b20gPSBvZmZzZXQu
Ym90dG9tDQogICAgdmFyIHNjcm9sbEhlaWdodCA9IE1hdGgubWF4KCQoZG9jdW1lbnQpLmhlaWdo
dCgpLCAkKGRvY3VtZW50LmJvZHkpLmhlaWdodCgpKQ0KDQogICAgaWYgKHR5cGVvZiBvZmZzZXQg
IT0gJ29iamVjdCcpICAgICAgICAgb2Zmc2V0Qm90dG9tID0gb2Zmc2V0VG9wID0gb2Zmc2V0DQog
ICAgaWYgKHR5cGVvZiBvZmZzZXRUb3AgPT0gJ2Z1bmN0aW9uJykgICAgb2Zmc2V0VG9wICAgID0g
b2Zmc2V0LnRvcCh0aGlzLiRlbGVtZW50KQ0KICAgIGlmICh0eXBlb2Ygb2Zmc2V0Qm90dG9tID09
ICdmdW5jdGlvbicpIG9mZnNldEJvdHRvbSA9IG9mZnNldC5ib3R0b20odGhpcy4kZWxlbWVudCkN
Cg0KICAgIHZhciBhZmZpeCA9IHRoaXMuZ2V0U3RhdGUoc2Nyb2xsSGVpZ2h0LCBoZWlnaHQsIG9m
ZnNldFRvcCwgb2Zmc2V0Qm90dG9tKQ0KDQogICAgaWYgKHRoaXMuYWZmaXhlZCAhPSBhZmZpeCkg
ew0KICAgICAgaWYgKHRoaXMudW5waW4gIT0gbnVsbCkgdGhpcy4kZWxlbWVudC5jc3MoJ3RvcCcs
ICcnKQ0KDQogICAgICB2YXIgYWZmaXhUeXBlID0gJ2FmZml4JyArIChhZmZpeCA/ICctJyArIGFm
Zml4IDogJycpDQogICAgICB2YXIgZSAgICAgICAgID0gJC5FdmVudChhZmZpeFR5cGUgKyAnLmJz
LmFmZml4JykNCg0KICAgICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpDQoNCiAgICAgIGlmIChl
LmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm4NCg0KICAgICAgdGhpcy5hZmZpeGVkID0gYWZm
aXgNCiAgICAgIHRoaXMudW5waW4gPSBhZmZpeCA9PSAnYm90dG9tJyA/IHRoaXMuZ2V0UGlubmVk
T2Zmc2V0KCkgOiBudWxsDQoNCiAgICAgIHRoaXMuJGVsZW1lbnQNCiAgICAgICAgLnJlbW92ZUNs
YXNzKEFmZml4LlJFU0VUKQ0KICAgICAgICAuYWRkQ2xhc3MoYWZmaXhUeXBlKQ0KICAgICAgICAu
dHJpZ2dlcihhZmZpeFR5cGUucmVwbGFjZSgnYWZmaXgnLCAnYWZmaXhlZCcpICsgJy5icy5hZmZp
eCcpDQogICAgfQ0KDQogICAgaWYgKGFmZml4ID09ICdib3R0b20nKSB7DQogICAgICB0aGlzLiRl
bGVtZW50Lm9mZnNldCh7DQogICAgICAgIHRvcDogc2Nyb2xsSGVpZ2h0IC0gaGVpZ2h0IC0gb2Zm
c2V0Qm90dG9tDQogICAgICB9KQ0KICAgIH0NCiAgfQ0KDQoNCiAgLy8gQUZGSVggUExVR0lOIERF
RklOSVRJT04NCiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT0NCg0KICBmdW5jdGlvbiBQbHVn
aW4ob3B0aW9uKSB7DQogICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7DQogICAgICB2
YXIgJHRoaXMgICA9ICQodGhpcykNCiAgICAgIHZhciBkYXRhICAgID0gJHRoaXMuZGF0YSgnYnMu
YWZmaXgnKQ0KICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYm
IG9wdGlvbg0KDQogICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLmFmZml4JywgKGRhdGEg
PSBuZXcgQWZmaXgodGhpcywgb3B0aW9ucykpKQ0KICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0g
J3N0cmluZycpIGRhdGFbb3B0aW9uXSgpDQogICAgfSkNCiAgfQ0KDQogIHZhciBvbGQgPSAkLmZu
LmFmZml4DQoNCiAgJC5mbi5hZmZpeCAgICAgICAgICAgICA9IFBsdWdpbg0KICAkLmZuLmFmZml4
LkNvbnN0cnVjdG9yID0gQWZmaXgNCg0KDQogIC8vIEFGRklYIE5PIENPTkZMSUNUDQogIC8vID09
PT09PT09PT09PT09PT09DQoNCiAgJC5mbi5hZmZpeC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkg
ew0KICAgICQuZm4uYWZmaXggPSBvbGQNCiAgICByZXR1cm4gdGhpcw0KICB9DQoNCg0KICAvLyBB
RkZJWCBEQVRBLUFQSQ0KICAvLyA9PT09PT09PT09PT09PQ0KDQogICQod2luZG93KS5vbignbG9h
ZCcsIGZ1bmN0aW9uICgpIHsNCiAgICAkKCdbZGF0YS1zcHk9ImFmZml4Il0nKS5lYWNoKGZ1bmN0
aW9uICgpIHsNCiAgICAgIHZhciAkc3B5ID0gJCh0aGlzKQ0KICAgICAgdmFyIGRhdGEgPSAkc3B5
LmRhdGEoKQ0KDQogICAgICBkYXRhLm9mZnNldCA9IGRhdGEub2Zmc2V0IHx8IHt9DQoNCiAgICAg
IGlmIChkYXRhLm9mZnNldEJvdHRvbSAhPSBudWxsKSBkYXRhLm9mZnNldC5ib3R0b20gPSBkYXRh
Lm9mZnNldEJvdHRvbQ0KICAgICAgaWYgKGRhdGEub2Zmc2V0VG9wICAgICE9IG51bGwpIGRhdGEu
b2Zmc2V0LnRvcCAgICA9IGRhdGEub2Zmc2V0VG9wDQoNCiAgICAgIFBsdWdpbi5jYWxsKCRzcHks
IGRhdGEpDQogICAgfSkNCiAgfSkNCg0KfShqUXVlcnkpOw0K
----field----
field: {C06867FE-9A43-4C7D-B739-48780492D06F}
name: Extension
key: extension
content-length: 2

js
----field----
field: {6F47A0A5-9C94-4B48-ABEB-42D38DEF6054}
name: Mime Type
key: mime type
content-length: 24

application/x-javascript
----field----
field: {6954B7C7-2487-423F-8600-436CB3B6DC0E}
name: Size
key: size
content-length: 5

72084
----field----
field: {06D5295C-ED2F-4A54-9BF2-26228D113318}
name: __Icon
key: __icon
content-length: 61

-/media/BA54F3EC6DBE424C92A13E5057E1782C.ashx?h=16&thn=1&w=16
----field----
field: {BA3F86A2-4A1C-4D78-B63D-91C2779C1B5E}
name: __Sortorder
key: __sortorder
content-length: 4

2400
----version----
language: en
version: 1
revision: 63bed295-81e6-46df-99d0-218dd29f5bbe

----field----
field: {25BED78C-4957-4165-998A-CA1B52F67497}
name: __Created
key: __created
content-length: 16

20171204T154911Z
----field----
field: {8CDC337E-A112-42FB-BBB4-4143751E123F}
name: __Revision
key: __revision
content-length: 36

63bed295-81e6-46df-99d0-218dd29f5bbe
----field----
field: {D9CF14B1-FA16-4BA6-9288-E8A174D4D522}
name: __Updated
key: __updated
content-length: 16

20171204T164520Z
----field----
field: {BADD9CF9-53E0-4D0C-BCC0-2D784C282F6A}
name: __Updated by
key: __updated by
content-length: 14

sitecore\admin
